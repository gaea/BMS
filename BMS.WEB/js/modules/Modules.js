Ext.define("MyDesktop.VideoWindow",{extend:"Ext.ux.desktop.Module",uses:["Ext.ux.desktop.Video"],id:"video",windowId:"video-window",tipWidth:160,tipHeight:96,init:function(){this.launcher={text:"About Ext JS",iconCls:"video"}},createWindow:function(){var a=this,c=a.app.getDesktop(),b=c.getWindow(a.windowId);if(!b){b=c.createWindow({id:a.windowId,title:"About Ext JS",width:740,height:480,iconCls:"video",animCollapse:false,border:false,layout:"fit",items:[{xtype:"video",id:"video-player",src:[{src:"http://dev.sencha.com/desktopvideo.mp4",type:"video/mp4"},{src:"http://dev.sencha.com/desktopvideo.ogv",type:"video/ogg"},{src:"http://dev.sencha.com/desktopvideo.mov",type:"video/quicktime"}],autobuffer:true,autoplay:true,controls:true,listeners:{afterrender:function(d){a.videoEl=d.video.dom;if(d.supported){a.tip=new Ext.tip.ToolTip({anchor:"bottom",dismissDelay:0,height:a.tipHeight,width:a.tipWidth,renderTpl:['<canvas width="',a.tipWidth,'" height="',a.tipHeight,'">'],renderSelectors:{body:"canvas"},listeners:{afterrender:a.onTooltipRender,show:a.renderPreview,scope:a}})}}}}],listeners:{beforedestroy:function(){a.tip=a.ctx=a.videoEl=null}}})}if(a.tip){a.tip.setTarget(b.taskButton.el)}return b},onTooltipRender:function(c){var a=c.body.dom,b=this;b.ctx=a.getContext&&a.getContext("2d")},renderPreview:function(){var a=this;if((a.tip&&!a.tip.isVisible())||!a.videoEl){return}if(a.ctx){try{a.ctx.drawImage(a.videoEl,0,0,a.tipWidth,a.tipHeight)}catch(b){}}Ext.Function.defer(a.renderPreview,20,a)}});
Ext.define("MyDesktop.TabWindow",{extend:"Ext.ux.desktop.Module",requires:["Ext.tab.Panel"],id:"tab-win",init:function(){this.launcher={text:"Tab Window",iconCls:"tabs"}},createWindow:function(){var b=this.app.getDesktop();var a=b.getWindow("tab-win");if(!a){a=b.createWindow({id:"tab-win",title:"Tab Window",width:740,height:480,iconCls:"tabs",animCollapse:false,border:false,constrainHeader:true,layout:"fit",items:[{xtype:"tabpanel",activeTab:0,bodyStyle:"padding: 5px;",items:[{title:"Tab Text 1",header:false,html:"<p>Something useful would be in here.</p>",border:false},{title:"Tab Text 2",header:false,html:"<p>Something useful would be in here.</p>",border:false},{title:"Tab Text 3",header:false,html:"<p>Something useful would be in here.</p>",border:false},{title:"Tab Text 4",header:false,html:"<p>Something useful would be in here.</p>",border:false}]}]})}return a}});Ext.define("Ext.panel.Table",{extend:"Ext.panel.Panel",alias:"widget.tablepanel",uses:["Ext.selection.RowModel","Ext.grid.PagingScroller","Ext.grid.header.Container","Ext.grid.Lockable"],extraBaseCls:Ext.baseCSSPrefix+"grid",extraBodyCls:Ext.baseCSSPrefix+"grid-body",layout:"fit",hasView:false,viewType:null,selType:"rowmodel",scroll:true,deferRowRender:true,sortableColumns:true,enableLocking:false,scrollerOwner:true,enableColumnMove:true,restrictColumnReorder:false,enableColumnResize:true,enableColumnHide:true,rowLines:true,initComponent:function(){var g=this,j=g.scroll,b=false,a=false,f=g.columns||g.colModel,h,c=g.border;if(g.hideHeaders){c=false}if(g.columnLines){g.addCls(Ext.baseCSSPrefix+"grid-with-col-lines")}if(g.rowLines){g.addCls(Ext.baseCSSPrefix+"grid-with-row-lines")}g.store=Ext.data.StoreManager.lookup(g.store||"ext-empty-store");if(f instanceof Ext.grid.header.Container){g.headerCt=f;g.headerCt.border=c;g.columns=g.headerCt.items.items}else{if(Ext.isArray(f)){f={items:f,border:c}}Ext.apply(f,{forceFit:g.forceFit,sortable:g.sortableColumns,enableColumnMove:g.enableColumnMove,enableColumnResize:g.enableColumnResize,enableColumnHide:g.enableColumnHide,border:c,restrictReorder:g.restrictColumnReorder});g.columns=f.items;if(g.enableLocking||Ext.ComponentQuery.query("{locked !== undefined}{processed != true}",g.columns).length){g.self.mixin("lockable",Ext.grid.Lockable);g.injectLockable()}}g.addEvents("reconfigure","viewready");g.bodyCls=g.bodyCls||"";g.bodyCls+=(" "+g.extraBodyCls);g.cls=g.cls||"";g.cls+=(" "+g.extraBaseCls);delete g.autoScroll;if(!g.hasView){if(!g.headerCt){g.headerCt=new Ext.grid.header.Container(f)}g.columns=g.headerCt.items.items;if(g.store.buffered&&!g.store.remoteSort){for(var d=0,e=g.columns.length;d<e;d++){g.columns[d].sortable=false}}if(g.hideHeaders){g.headerCt.height=0;g.headerCt.border=false;g.headerCt.addCls(Ext.baseCSSPrefix+"grid-header-ct-hidden");g.addCls(Ext.baseCSSPrefix+"grid-header-hidden");if(Ext.isIEQuirks){g.headerCt.style={display:"none"}}}if(j===true||j==="both"){b=a=true}else{if(j==="horizontal"){a=true}else{if(j==="vertical"){b=true}}}g.relayHeaderCtEvents(g.headerCt);g.features=g.features||[];if(!Ext.isArray(g.features)){g.features=[g.features]}g.dockedItems=g.dockedItems||[];g.dockedItems.unshift(g.headerCt);g.viewConfig=g.viewConfig||{};if(g.store&&g.store.buffered){g.viewConfig.preserveScrollOnRefresh=true}else{if(g.invalidateScrollerOnRefresh!==undefined){g.viewConfig.preserveScrollOnRefresh=!g.invalidateScrollerOnRefresh}}h=g.getView();g.items=[h];g.hasView=true;if(b){if(g.store.buffered){g.verticalScroller=new Ext.grid.PagingScroller(Ext.apply({panel:g,store:g.store,view:g.view},g.verticalScroller))}}if(a){if(!g.hideHeaders){h.on({scroll:{fn:g.onHorizontalScroll,element:"el",scope:g}})}}g.mon(h.store,{load:g.onStoreLoad,scope:g});g.mon(h,{viewready:g.onViewReady,refresh:g.onViewRefresh,scope:g})}this.relayEvents(g.view,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","containermouseup","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","selectionchange","beforeselect","select","beforedeselect","deselect"]);g.callParent(arguments)},initStateEvents:function(){this.stateEvents=Ext.Array.merge(this.stateEvents,["columnresize","columnmove","columnhide","columnshow","sortchange"]);this.callParent()},relayHeaderCtEvents:function(a){this.relayEvents(a,["columnresize","columnmove","columnhide","columnshow","sortchange"])},getState:function(){var a=this,b=a.callParent(),c=a.store.sorters.first();b=a.addPropertyToState(b,"columns",(a.headerCt||a).getColumnsState());if(c){b=a.addPropertyToState(b,"sort",{property:c.property,direction:c.direction,root:c.root})}return b},applyState:function(d){var c=this,e=d.sort,a=c.store,b=d.columns;delete d.columns;c.callParent(arguments);if(b){(c.headerCt||c).applyColumnsState(b)}if(e){if(a.remoteSort){a.sort({property:e.property,direction:e.direction,root:e.root},null,false)}else{a.sort(e.property,e.direction)}}},getStore:function(){return this.store},getView:function(){var a=this,b;if(!a.view){b=a.getSelectionModel();a.view=Ext.widget(Ext.apply({},a.viewConfig,{deferInitialRefresh:a.deferRowRender!==false,scroll:a.scroll,xtype:a.viewType,store:a.store,headerCt:a.headerCt,selModel:b,features:a.features,panel:a}));a.mon(a.view,{uievent:a.processEvent,scope:a});b.view=a.view;a.headerCt.view=a.view;a.relayEvents(a.view,["cellclick","celldblclick"])}return a.view},setAutoScroll:Ext.emptyFn,processEvent:function(f,b,a,c,d,h){var g=this,i;if(d!==-1){i=g.headerCt.getGridColumns()[d];return i.processEvent.apply(i,arguments)}},determineScrollbars:function(){},invalidateScroller:function(){},scrollByDeltaY:function(b,a){this.getView().scrollBy(0,b,a)},scrollByDeltaX:function(b,a){this.getView().scrollBy(b,0,a)},afterCollapse:function(){var a=this;a.saveScrollPos();a.saveScrollPos();a.callParent(arguments)},afterExpand:function(){var a=this;a.callParent(arguments);a.restoreScrollPos();a.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderMove:function(d,e,a,b,c){this.view.moveColumn(b,c,a)},onHeaderHide:function(a,b){},onHeaderShow:function(a,b){},onViewReady:function(){this.fireEvent("viewready",this)},onViewRefresh:function(){if(this.store.getCount()&&!this.firstDataArrived&&this.headerCt.down("gridcolumn[flex]")||this.headerCt.down("gridcolumn[isGroupHeader]")){this.firstDataArrived=true;this.headerCt.updateLayout()}},setScrollTop:function(c){var b=this,a=b.getScrollerOwner();a.virtualScrollTop=c},getScrollerOwner:function(){var a=this;if(!this.scrollerOwner){a=this.up("[scrollerOwner]")}return a},getLhsMarker:function(){var a=this;return a.lhsMarker||(a.lhsMarker=Ext.DomHelper.append(a.el,{cls:Ext.baseCSSPrefix+"grid-resize-marker"},true))},getRhsMarker:function(){var a=this;return a.rhsMarker||(a.rhsMarker=Ext.DomHelper.append(a.el,{cls:Ext.baseCSSPrefix+"grid-resize-marker"},true))},getSelectionModel:function(){if(!this.selModel){this.selModel={}}var b="SINGLE",a;if(this.simpleSelect){b="SIMPLE"}else{if(this.multiSelect){b="MULTI"}}Ext.applyIf(this.selModel,{allowDeselect:this.allowDeselect,mode:b});if(!this.selModel.events){a=this.selModel.selType||this.selType;this.selModel=Ext.create("selection."+a,this.selModel)}if(!this.selModel.hasRelaySetup){this.relayEvents(this.selModel,["selectionchange","beforeselect","beforedeselect","select","deselect"]);this.selModel.hasRelaySetup=true}if(this.disableSelection){this.selModel.locked=true}return this.selModel},onHorizontalScroll:function(d,e){var b=this.getScrollerOwner(),c=b.query("tableview"),a=c[1]||c[0];a.el.dom.scrollLeft=e.scrollLeft;this.headerCt.el.dom.scrollLeft=e.scrollLeft},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(a){var b=this;b.store=a;b.getView().bindStore(a)},beforeDestroy:function(){Ext.destroy(this.verticalScroller);this.callParent()},reconfigure:function(a,b){var c=this,d=c.headerCt;if(c.lockable){c.reconfigureLockable(a,b)}else{if(b){d.suspendLayouts();d.removeAll();d.add(b)}if(a){a=Ext.StoreManager.lookup(a);c.bindStore(a)}else{c.getView().refresh()}if(b){d.resumeLayouts(true)}d.setSortState()}c.fireEvent("reconfigure",c,a,b)}});Ext.define("Ext.grid.Panel",{extend:"Ext.panel.Table",requires:["Ext.grid.View"],alias:["widget.gridpanel","widget.grid"],alternateClassName:["Ext.list.ListView","Ext.ListView","Ext.grid.GridPanel"],viewType:"gridview",lockable:false,bothCfgCopy:["invalidateScrollerOnRefresh","hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns"],normalCfgCopy:["verticalScroller","verticalScrollDock","verticalScrollerType","scroll"],lockedCfgCopy:[],rowLines:true});
Ext.define("MyDesktop.GridWindow",{extend:"Ext.ux.desktop.Module",requires:["Ext.data.ArrayStore","Ext.util.Format","Ext.grid.Panel","Ext.grid.RowNumberer"],id:"grid-win",init:function(){this.launcher={text:"Grid Window",iconCls:"icon-grid"}},createWindow:function(){var b=this.app.getDesktop();var a=b.getWindow("grid-win");if(!a){a=b.createWindow({id:"grid-win",title:"Grid Window",width:740,height:480,iconCls:"icon-grid",animCollapse:false,constrainHeader:true,layout:"fit",items:[{border:false,xtype:"grid",store:new Ext.data.ArrayStore({fields:[{name:"company"},{name:"price",type:"float"},{name:"change",type:"float"},{name:"pctChange",type:"float"}],data:MyDesktop.GridWindow.getDummyData()}),columns:[new Ext.grid.RowNumberer(),{text:"Company",flex:1,sortable:true,dataIndex:"company"},{text:"Price",width:70,sortable:true,renderer:Ext.util.Format.usMoney,dataIndex:"price"},{text:"Change",width:70,sortable:true,dataIndex:"change"},{text:"% Change",width:70,sortable:true,dataIndex:"pctChange"}]}],tbar:[{text:"Add Something",tooltip:"Add a new row",iconCls:"add"},"-",{text:"Options",tooltip:"Blah blah blah blaht",iconCls:"option"},"-",{text:"Remove Something",tooltip:"Remove the selected item",iconCls:"remove"}]})}return a},statics:{getDummyData:function(){return[["3m Co",71.72,0.02,0.03,"9/1 12:00am"],["Alcoa Inc",29.01,0.42,1.47,"9/1 12:00am"],["American Express Company",52.55,0.01,0.02,"9/1 12:00am"],["American International Group, Inc.",64.13,0.31,0.49,"9/1 12:00am"],["AT&T Inc.",31.61,-0.48,-1.54,"9/1 12:00am"],["Caterpillar Inc.",67.27,0.92,1.39,"9/1 12:00am"],["Citigroup, Inc.",49.37,0.02,0.04,"9/1 12:00am"],["Exxon Mobil Corp",68.1,-0.43,-0.64,"9/1 12:00am"],["General Electric Company",34.14,-0.08,-0.23,"9/1 12:00am"],["General Motors Corporation",30.27,1.09,3.74,"9/1 12:00am"],["Hewlett-Packard Co.",36.53,-0.03,-0.08,"9/1 12:00am"],["Honeywell Intl Inc",38.77,0.05,0.13,"9/1 12:00am"],["Intel Corporation",19.88,0.31,1.58,"9/1 12:00am"],["Johnson & Johnson",64.72,0.06,0.09,"9/1 12:00am"],["Merck & Co., Inc.",40.96,0.41,1.01,"9/1 12:00am"],["Microsoft Corporation",25.84,0.14,0.54,"9/1 12:00am"],["The Coca-Cola Company",45.07,0.26,0.58,"9/1 12:00am"],["The Procter & Gamble Company",61.91,0.01,0.02,"9/1 12:00am"],["Wal-Mart Stores, Inc.",45.45,0.73,1.63,"9/1 12:00am"],["Walt Disney Company (The) (Holding Company)",29.89,0.24,0.81,"9/1 12:00am"]]}}});Ext.define("Ext.tree.Panel",{extend:"Ext.panel.Table",alias:"widget.treepanel",alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],requires:["Ext.tree.View","Ext.selection.TreeModel","Ext.tree.Column"],viewType:"treeview",selType:"treemodel",treeCls:Ext.baseCSSPrefix+"tree-panel",deferRowRender:false,rowLines:false,lines:true,useArrows:false,singleExpand:false,ddConfig:{enableDrag:true,enableDrop:true},rootVisible:true,displayField:"text",root:null,normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],constructor:function(a){a=a||{};if(a.animate===undefined){a.animate=Ext.enableFx}this.enableAnimations=a.animate;delete a.animate;this.callParent([a])},initComponent:function(){var c=this,b=[c.treeCls],a;if(c.useArrows){b.push(Ext.baseCSSPrefix+"tree-arrows");c.lines=false}if(c.lines){b.push(Ext.baseCSSPrefix+"tree-lines")}else{if(!c.useArrows){b.push(Ext.baseCSSPrefix+"tree-no-lines")}}if(Ext.isString(c.store)){c.store=Ext.StoreMgr.lookup(c.store)}else{if(!c.store||Ext.isObject(c.store)&&!c.store.isStore){c.store=new Ext.data.TreeStore(Ext.apply({},c.store||{},{root:c.root,fields:c.fields,model:c.model,folderSort:c.folderSort}))}else{if(c.root){c.store=Ext.data.StoreManager.lookup(c.store);c.store.setRootNode(c.root);if(c.folderSort!==undefined){c.store.folderSort=c.folderSort;c.store.sort()}}}}c.viewConfig=Ext.apply({},c.viewConfig);c.viewConfig=Ext.applyIf(c.viewConfig,{rootVisible:c.rootVisible,animate:c.enableAnimations,singleExpand:c.singleExpand,node:c.store.getRootNode(),hideHeaders:c.hideHeaders});c.mon(c.store,{scope:c,rootchange:c.onRootChange,clear:c.onClear});c.relayEvents(c.store,["beforeload","load"]);c.store.on({append:c.createRelayer("itemappend"),remove:c.createRelayer("itemremove"),move:c.createRelayer("itemmove"),insert:c.createRelayer("iteminsert"),beforeappend:c.createRelayer("beforeitemappend"),beforeremove:c.createRelayer("beforeitemremove"),beforemove:c.createRelayer("beforeitemmove"),beforeinsert:c.createRelayer("beforeiteminsert"),expand:c.createRelayer("itemexpand"),collapse:c.createRelayer("itemcollapse"),beforeexpand:c.createRelayer("beforeitemexpand"),beforecollapse:c.createRelayer("beforeitemcollapse")});if(!c.columns){if(c.initialConfig.hideHeaders===undefined){c.hideHeaders=true}c.autoWidth=true;c.addCls(Ext.baseCSSPrefix+"autowidth-table");c.columns=[{xtype:"treecolumn",text:"Name",width:Ext.isIE6?null:10000,dataIndex:c.displayField}]}if(c.cls){b.push(c.cls)}c.cls=b.join(" ");c.callParent();a=c.getView();c.relayEvents(a,["checkchange","afteritemexpand","afteritemcollapse"]);if(!a.rootVisible&&!c.getRootNode()){c.setRootNode({expanded:true})}},onClear:function(){this.view.onClear()},setRootNode:function(){return this.store.setRootNode.apply(this.store,arguments)},getRootNode:function(){return this.store.getRootNode()},onRootChange:function(a){this.view.setRootNode(a)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(a){return a.get("checked")},expandAll:function(e,d){var b=this.getRootNode(),c=this.enableAnimations,a=this.getView();if(b){if(!c){a.beginBulkUpdate()}b.expand(true,e,d);if(!c){a.endBulkUpdate()}}},collapseAll:function(e,d){var b=this.getRootNode(),c=this.enableAnimations,a=this.getView();if(b){if(!c){a.beginBulkUpdate()}if(a.rootVisible){b.collapse(true,e,d)}else{b.collapseChildren(true,e,d)}if(!c){a.endBulkUpdate()}}},expandPath:function(k,f,a,g,j){var d=this,c=d.getRootNode(),b=1,e=d.getView(),i,h;f=f||d.getRootNode().idProperty;a=a||"/";if(Ext.isEmpty(k)){Ext.callback(g,j||d,[false,null]);return}i=k.split(a);if(c.get(f)!=i[1]){Ext.callback(g,j||d,[false,c]);return}h=function(){if(++b===i.length){Ext.callback(g,j||d,[true,c]);return}var l=c.findChild(f,i[b]);if(!l){Ext.callback(g,j||d,[false,c]);return}c=l;c.expand(false,h)};c.expand(false,h)},selectPath:function(g,f,e,h,a){var d=this,c,b;f=f||d.getRootNode().idProperty;e=e||"/";c=g.split(e);b=c.pop();d.expandPath(c.join(e),f,e,function(k,j){var i=false;if(k&&j){j=j.findChild(f,b);if(j){d.getSelectionModel().select(j);Ext.callback(h,a||d,[true,j]);i=true}}else{if(j===d.getRootNode()){i=true}}Ext.callback(h,a||d,[i,j])},d)}});
Ext.define("MyDesktop.AccordionWindow",{extend:"Ext.ux.desktop.Module",requires:["Ext.data.TreeStore","Ext.layout.container.Accordion","Ext.toolbar.Spacer","Ext.tree.Panel"],id:"acc-win",init:function(){this.launcher={text:"Accordion Window",iconCls:"accordion"}},createTree:function(){var a=Ext.create("Ext.tree.Panel",{id:"im-tree",title:"Online Users",rootVisible:false,lines:false,autoScroll:true,tools:[{type:"refresh",handler:function(e,d){a.setLoading(true,a.body);var b=a.getRootNode();b.collapseChildren(true,false);Ext.Function.defer(function(){a.setLoading(false);b.expand(true,true)},1000)}}],store:Ext.create("Ext.data.TreeStore",{root:{text:"Online",expanded:true,children:[{text:"Friends",expanded:true,children:[{text:"Brian",iconCls:"user",leaf:true},{text:"Kevin",iconCls:"user",leaf:true},{text:"Mark",iconCls:"user",leaf:true},{text:"Matt",iconCls:"user",leaf:true},{text:"Michael",iconCls:"user",leaf:true},{text:"Mike Jr",iconCls:"user",leaf:true},{text:"Mike Sr",iconCls:"user",leaf:true},{text:"JR",iconCls:"user",leaf:true},{text:"Rich",iconCls:"user",leaf:true},{text:"Nige",iconCls:"user",leaf:true},{text:"Zac",iconCls:"user",leaf:true}]},{text:"Family",expanded:true,children:[{text:"Kiana",iconCls:"user-girl",leaf:true},{text:"Aubrey",iconCls:"user-girl",leaf:true},{text:"Cale",iconCls:"user-kid",leaf:true}]}]}})});return a},createWindow:function(){var b=this.app.getDesktop();var a=b.getWindow("acc-win");if(!a){a=b.createWindow({id:"acc-win",title:"Accordion Window",width:250,height:400,iconCls:"accordion",animCollapse:false,constrainHeader:true,bodyBorder:true,tbar:{xtype:"toolbar",ui:"plain",items:[{tooltip:{title:"Rich Tooltips",text:"Let your users know what they can do!"},iconCls:"connect"},"-",{tooltip:"Add a new user",iconCls:"user-add"}," ",{tooltip:"Remove the selected user",iconCls:"user-delete"}]},layout:"accordion",border:false,items:[this.createTree(),{title:"Settings",html:"<p>Something useful would be in here.</p>",autoScroll:true},{title:"Even More Stuff",html:"<p>Something useful would be in here.</p>"},{title:"My Stuff",html:"<p>Something useful would be in here.</p>"}]})}return a}});Ext.define("Ext.tip.Tip",{extend:"Ext.panel.Panel",alternateClassName:"Ext.Tip",minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:true,frame:false,autoRender:true,hidden:true,baseCls:Ext.baseCSSPrefix+"tip",floating:{shadow:true,shim:true,constrain:true},focusOnToFront:false,closeAction:"hide",ariaRole:"tooltip",initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow},a.self.prototype.floating);a.callParent(arguments);a.constrain=a.constrain||a.constrainPosition},showAt:function(b){var a=this;this.callParent(arguments);if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true)}},showBy:function(a,b){this.showAt(this.el.getAlignToXY(a,b||this.defaultAlign))},initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.getScopeParent()};Ext.Component.prototype.initDraggable.call(a)},ghost:undefined,unghost:undefined});Ext.define("Ext.tip.ToolTip",{extend:"Ext.tip.Tip",alias:"widget.tooltip",alternateClassName:"Ext.ToolTip",showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,quickShowInterval:250,initComponent:function(){var a=this;a.callParent(arguments);a.lastActive=new Date();a.setTarget(a.target);a.origAnchor=a.anchor},onRender:function(b,a){var c=this;c.callParent(arguments);c.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+c.getAnchorPosition();c.anchorEl=c.el.createChild({cls:Ext.baseCSSPrefix+"tip-anchor "+c.anchorCls})},setTarget:function(d){var b=this,a=Ext.get(d),c;if(b.target){c=Ext.get(b.target);b.mun(c,"mouseover",b.onTargetOver,b);b.mun(c,"mouseout",b.onTargetOut,b);b.mun(c,"mousemove",b.onMouseMove,b)}b.target=a;if(a){b.mon(a,{freezeEvent:true,mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b})}if(b.anchor){b.anchorTarget=b.target}},onMouseMove:function(d){var b=this,a=b.delegate?d.getTarget(b.delegate):b.triggerElement=true,c;if(a){b.targetXY=d.getXY();if(a===b.triggerElement){if(!b.hidden&&b.trackMouse){c=b.getTargetXY();if(b.constrainPosition){c=b.el.adjustForConstraints(c,b.el.getScopeParent())}b.setPagePosition(c)}}else{b.hide();b.lastActive=new Date(0);b.onTargetOver(d)}}else{if((!b.closable&&b.isVisible())&&b.autoHide!==false){b.hide()}}},getTargetXY:function(){var i=this,d;if(i.delegate){i.anchorTarget=i.triggerElement}if(i.anchor){i.targetCounter++;var c=i.getOffsets(),m=(i.anchorToTarget&&!i.trackMouse)?i.el.getAlignToXY(i.anchorTarget,i.getAnchorAlign()):i.targetXY,a=Ext.Element.getViewWidth()-5,h=Ext.Element.getViewHeight()-5,k=document.documentElement,e=document.body,l=(k.scrollLeft||e.scrollLeft||0)+5,j=(k.scrollTop||e.scrollTop||0)+5,b=[m[0]+c[0],m[1]+c[1]],g=i.getSize(),f=i.constrainPosition;i.anchorEl.removeCls(i.anchorCls);if(i.targetCounter<2&&f){if(b[0]<l){if(i.anchorToTarget){i.defaultAlign="l-r";if(i.mouseOffset){i.mouseOffset[0]*=-1}}i.anchor="left";return i.getTargetXY()}if(b[0]+g.width>a){if(i.anchorToTarget){i.defaultAlign="r-l";if(i.mouseOffset){i.mouseOffset[0]*=-1}}i.anchor="right";return i.getTargetXY()}if(b[1]<j){if(i.anchorToTarget){i.defaultAlign="t-b";if(i.mouseOffset){i.mouseOffset[1]*=-1}}i.anchor="top";return i.getTargetXY()}if(b[1]+g.height>h){if(i.anchorToTarget){i.defaultAlign="b-t";if(i.mouseOffset){i.mouseOffset[1]*=-1}}i.anchor="bottom";return i.getTargetXY()}}i.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+i.getAnchorPosition();i.anchorEl.addCls(i.anchorCls);i.targetCounter=0;return b}else{d=i.getMouseOffset();return(i.targetXY)?[i.targetXY[0]+d[0],i.targetXY[1]+d[1]]:d}},getMouseOffset:function(){var a=this,b=a.anchor?[0,0]:[15,18];if(a.mouseOffset){b[0]+=a.mouseOffset[0];b[1]+=a.mouseOffset[1]}return b},getAnchorPosition:function(){var b=this,a;if(b.anchor){b.tipAnchor=b.anchor.charAt(0)}else{a=b.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);b.tipAnchor=a[1].charAt(0)}switch(b.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var c=this,d,b,a=c.getAnchorPosition().charAt(0);if(c.anchorToTarget&&!c.trackMouse){switch(a){case"t":b=[0,9];break;case"b":b=[0,-13];break;case"r":b=[-13,0];break;default:b=[9,0];break}}else{switch(a){case"t":b=[-15-c.anchorOffset,30];break;case"b":b=[-19-c.anchorOffset,-13-c.el.dom.offsetHeight];break;case"r":b=[-15-c.el.dom.offsetWidth,-13-c.anchorOffset];break;default:b=[25,-13-c.anchorOffset];break}}d=c.getMouseOffset();b[0]+=d[0];b[1]+=d[1];return b},onTargetOver:function(c){var b=this,a;if(b.disabled||c.within(b.target.dom,true)){return}a=c.getTarget(b.delegate);if(a){b.triggerElement=a;b.clearTimer("hide");b.targetXY=c.getXY();b.delayShow()}},delayShow:function(){var a=this;if(a.hidden&&!a.showTimer){if(Ext.Date.getElapsed(a.lastActive)<a.quickShowInterval){a.show()}else{a.showTimer=Ext.defer(a.show,a.showDelay,a)}}else{if(!a.hidden&&a.autoHide!==false){a.show()}}},onTargetOut:function(b){var a=this;if(a.disabled||b.within(a.target.dom,true)){return}a.clearTimer("show");if(a.autoHide!==false){a.delayHide()}},delayHide:function(){var a=this;if(!a.hidden&&!a.hideTimer){a.hideTimer=Ext.defer(a.hide,a.hideDelay,a)}},hide:function(){var a=this;a.clearTimer("dismiss");a.lastActive=new Date();if(a.anchorEl){a.anchorEl.hide()}a.callParent(arguments);delete a.triggerElement},show:function(){var a=this;this.callParent();if(this.hidden===false){a.setPagePosition(-10000,-10000);if(a.anchor){a.anchor=a.origAnchor}a.showAt(a.getTargetXY());if(a.anchor){a.syncAnchor();a.anchorEl.show()}else{a.anchorEl.hide()}}},showAt:function(b){var a=this;a.lastActive=new Date();a.clearTimers();if(!a.isVisible()){this.callParent(arguments)}if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true);a.el.sync(true);if(a.dismissDelay&&a.autoHide!==false){a.dismissTimer=Ext.defer(a.hide,a.dismissDelay,a)}if(a.anchor){a.syncAnchor();if(!a.anchorEl.isVisible()){a.anchorEl.show()}}else{a.anchorEl.hide()}}},syncAnchor:function(){var c=this,a,b,d;switch(c.tipAnchor.charAt(0)){case"t":a="b";b="tl";d=[20+c.anchorOffset,1];break;case"r":a="l";b="tr";d=[-1,12+c.anchorOffset];break;case"b":a="t";b="bl";d=[20+c.anchorOffset,-1];break;default:a="r";b="tl";d=[1,12+c.anchorOffset];break}c.anchorEl.alignTo(c.el,a+"-"+b,d);c.anchorEl.setStyle("z-index",parseInt(c.el.getZIndex(),10)||0+1).setVisibilityMode(Ext.Element.DISPLAY)},setPagePosition:function(a,c){var b=this;b.callParent(arguments);if(b.anchor){b.syncAnchor()}},clearTimer:function(a){a=a+"Timer";clearTimeout(this[a]);delete this[a]},clearTimers:function(){var a=this;a.clearTimer("show");a.clearTimer("dismiss");a.clearTimer("hide")},onShow:function(){var a=this;a.callParent();a.mon(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onHide:function(){var a=this;a.callParent();a.mun(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onDocMouseDown:function(b){var a=this;if(a.autoHide!==true&&!a.closable&&!b.within(a.el.dom)){a.disable();Ext.defer(a.doEnable,100,a)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){this.callParent();this.clearTimers();this.hide()},beforeDestroy:function(){var a=this;a.clearTimers();Ext.destroy(a.anchorEl);delete a.anchorEl;delete a.target;delete a.anchorTarget;delete a.triggerElement;a.callParent()},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);this.callParent()}});Ext.define("Ext.chart.Tip",{requires:["Ext.tip.ToolTip","Ext.chart.TipSurface"],constructor:function(b){var c=this,a,d,e;if(b.tips){c.tipTimeout=null;c.tipConfig=Ext.apply({},b.tips,{renderer:Ext.emptyFn,constrainPosition:true,autoHide:true});c.tooltip=new Ext.tip.ToolTip(c.tipConfig);c.chart.surface.on("mousemove",c.tooltip.onMouseMove,c.tooltip);c.chart.surface.on("mouseleave",function(){c.hideTip()});if(c.tipConfig.surface){a=c.tipConfig.surface;d=a.sprites;e=new Ext.chart.TipSurface({id:"tipSurfaceComponent",sprites:d});if(a.width&&a.height){e.setSize(a.width,a.height)}c.tooltip.add(e);c.spriteTip=e}}},showTip:function(k){var e=this;if(!e.tooltip){return}clearTimeout(e.tipTimeout);var l=e.tooltip,a=e.spriteTip,c=e.tipConfig,d=l.trackMouse,j,b,i,g,h,f;if(!d){l.trackMouse=true;j=k.sprite;b=j.surface;i=Ext.get(b.getId());if(i){g=i.getXY();h=g[0]+(j.attr.x||0)+(j.attr.translation&&j.attr.translation.x||0);f=g[1]+(j.attr.y||0)+(j.attr.translation&&j.attr.translation.y||0);l.targetXY=[h,f]}}if(a){c.renderer.call(l,k.storeItem,k,a.surface)}else{c.renderer.call(l,k.storeItem,k)}l.show();l.trackMouse=d},hideTip:function(a){var b=this.tooltip;if(!b){return}clearTimeout(this.tipTimeout);this.tipTimeout=setTimeout(function(){b.hide()},0)}});Ext.define("Ext.chart.series.Series",{mixins:{observable:"Ext.util.Observable",labels:"Ext.chart.Label",highlights:"Ext.chart.Highlight",tips:"Ext.chart.Tip",callouts:"Ext.chart.Callout"},type:null,title:null,showInLegend:true,renderer:function(e,a,c,d,b){return c},shadowAttributes:null,triggerAfterDraw:false,constructor:function(a){var b=this;if(a){Ext.apply(b,a)}b.shadowGroups=[];b.mixins.labels.constructor.call(b,a);b.mixins.highlights.constructor.call(b,a);b.mixins.tips.constructor.call(b,a);b.mixins.callouts.constructor.call(b,a);b.addEvents({scope:b,itemmouseover:true,itemmouseout:true,itemmousedown:true,itemmouseup:true,mouseleave:true,afterdraw:true,titlechange:true});b.mixins.observable.constructor.call(b,a);b.on({scope:b,itemmouseover:b.onItemMouseOver,itemmouseout:b.onItemMouseOut,mouseleave:b.onMouseLeave})},eachRecord:function(c,b){var a=this.chart;(a.substore||a.store).each(c,b)},getRecordCount:function(){var b=this.chart,a=b.substore||b.store;return a?a.getCount():0},isExcluded:function(a){var b=this.__excludes;return !!(b&&b[a])},setBBox:function(a){var e=this,c=e.chart,b=c.chartBBox,f=a?0:c.maxGutter[0],d=a?0:c.maxGutter[1],g,h;g={x:b.x,y:b.y,width:b.width,height:b.height};e.clipBox=g;h={x:(g.x+f)-(c.zoom.x*c.zoom.width),y:(g.y+d)-(c.zoom.y*c.zoom.height),width:(g.width-(f*2))*c.zoom.width,height:(g.height-(d*2))*c.zoom.height};e.bbox=h},onAnimate:function(b,a){var c=this;b.stopAnimation();if(c.triggerAfterDraw){return b.animate(Ext.applyIf(a,c.chart.animate))}else{c.triggerAfterDraw=true;return b.animate(Ext.apply(Ext.applyIf(a,c.chart.animate),{listeners:{afteranimate:function(){c.triggerAfterDraw=false;c.fireEvent("afterrender")}}}))}},getGutters:function(){return[0,0]},onItemMouseOver:function(b){var a=this;if(b.series===a){if(a.highlight){a.highlightItem(b)}if(a.tooltip){a.showTip(b)}}},onItemMouseOut:function(b){var a=this;if(b.series===a){a.unHighlightItem();if(a.tooltip){a.hideTip(b)}}},onMouseLeave:function(){var a=this;a.unHighlightItem();if(a.tooltip){a.hideTip()}},getItemForPoint:function(a,h){if(!this.items||!this.items.length||this.seriesIsHidden){return null}var f=this,b=f.items,g=f.bbox,e,c,d;if(!Ext.draw.Draw.withinBox(a,h,g)){return null}for(c=0,d=b.length;c<d;c++){if(b[c]&&this.isItemInPoint(a,h,b[c],c)){return b[c]}}return null},isItemInPoint:function(a,d,c,b){return false},hideAll:function(){var g=this,f=g.items,k,e,d,c,a,h,b;g.seriesIsHidden=true;g._prevShowMarkers=g.showMarkers;g.showMarkers=false;g.hideLabels(0);for(d=0,e=f.length;d<e;d++){k=f[d];h=k.sprite;if(h){h.setAttributes({hidden:true},true)}if(h&&h.shadows){b=h.shadows;for(c=0,a=b.length;c<a;++c){b[c].setAttributes({hidden:true},true)}}}},showAll:function(){var a=this,b=a.chart.animate;a.chart.animate=false;a.seriesIsHidden=false;a.showMarkers=a._prevShowMarkers;a.drawSeries();a.chart.animate=b},hide:function(){if(this.items){var g=this,b=g.items,d,c,a,f,e;if(b&&b.length){for(d=0,f=b.length;d<f;++d){if(b[d].sprite){b[d].sprite.hide(true);e=b[d].shadows||b[d].sprite.shadows;if(e){for(c=0,a=e.length;c<a;++c){e[c].hide(true)}}}}g.hideLabels()}}},getLegendColor:function(a){var b=this,d,c;if(b.seriesStyle){d=b.seriesStyle.fill;c=b.seriesStyle.stroke;if(d&&d!="none"){return d}if(c){return c}}return(b.colorArrayStyle)?b.colorArrayStyle[b.seriesIdx%b.colorArrayStyle.length]:"#000"},visibleInLegend:function(a){var b=this.__excludes;if(b){return !b[a]}return !this.seriesIsHidden},setTitle:function(a,d){var c=this,b=c.title;if(Ext.isString(a)){d=a;a=0}if(Ext.isArray(b)){b[a]=d}else{c.title=d}c.fireEvent("titlechange",d,a)}});Ext.define("Ext.chart.series.Cartesian",{extend:"Ext.chart.series.Series",alternateClassName:["Ext.chart.CartesianSeries","Ext.chart.CartesianChart"],xField:null,yField:null,axis:"left",getLegendLabels:function(){var b=this,c=[],a=b.combinations;Ext.each([].concat(b.yField),function(e,d){var f=b.title;c.push((Ext.isArray(f)?f[d]:f)||e)});if(a){Ext.each(a,function(e){var d=c[e[0]],f=c[e[1]];c[e[1]]=d+" & "+f;c.splice(e[0],1)})}return c},eachYValue:function(a,c,b){Ext.each(this.getYValueAccessors(),function(d,e){c.call(b,d(a),e)})},getYValueCount:function(){return this.getYValueAccessors().length},combine:function(f,e){var d=this,c=d.getYValueAccessors(),b=c[f],a=c[e];c[e]=function(g){return b(g)+a(g)};c.splice(f,1);d.callParent([f,e])},clearCombinations:function(){delete this.yValueAccessors;this.callParent()},getYValueAccessors:function(){var b=this,a=b.yValueAccessors;if(!a){a=b.yValueAccessors=[];Ext.each([].concat(b.yField),function(c){a.push(function(d){return d.get(c)})})}return a},getMinMaxXValues:function(){var d=this,b,a,c=d.xField;if(d.getRecordCount()>0){b=Infinity;a=-b;d.eachRecord(function(e){var f=e.get(c);if(f>a){a=f}if(f<b){b=f}})}else{b=a=0}return[b,a]},getMinMaxYValues:function(){var h=this,f=h.stacked,e,c,d,b;function g(k,j){if(!h.isExcluded(j)){if(k<0){b+=k}else{d+=k}}}function a(k,j){if(!h.isExcluded(j)){if(k>c){c=k}if(k<e){e=k}}}if(h.getRecordCount()>0){e=Infinity;c=-e;h.eachRecord(function(i){if(f){d=0;b=0;h.eachYValue(i,g);if(d>c){c=d}if(b<e){e=b}}else{h.eachYValue(i,a)}})}else{e=c=0}return[e,c]},getAxesForXAndYFields:function(){var c=this,e=c.chart.axes,b=[].concat(c.axis),d,a;if(Ext.Array.indexOf(b,"top")>-1){d="top"}else{if(Ext.Array.indexOf(b,"bottom")>-1){d="bottom"}else{if(e.get("top")){d="top"}else{if(e.get("bottom")){d="bottom"}}}}if(Ext.Array.indexOf(b,"left")>-1){a="left"}else{if(Ext.Array.indexOf(b,"right")>-1){a="right"}else{if(e.get("left")){a="left"}else{if(e.get("right")){a="right"}}}}return{xAxis:d,yAxis:a}}});Ext.define("Ext.chart.series.Area",{extend:"Ext.chart.series.Cartesian",alias:"series.area",requires:["Ext.chart.axis.Axis","Ext.draw.Color","Ext.fx.Anim"],type:"area",stacked:true,style:{},constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,d,b;c.highlightCfg=Ext.Object.merge({},{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"},c.highlightCfg);Ext.apply(e,c,{__excludes:[]});if(e.highlight){e.highlightSprite=a.add({type:"path",path:["M",0,0],zIndex:1000,opacity:0.3,lineWidth:5,hidden:true,stroke:"#444"})}e.group=a.getGroup(e.seriesId)},shrink:function(b,m,n){var h=b.length,l=Math.floor(h/n),g,f,d=0,k=this.areas.length,a=[],e=[],c=[];for(f=0;f<k;++f){a[f]=0}for(g=0;g<h;++g){d+=b[g];for(f=0;f<k;++f){a[f]+=m[g][f]}if(g%l==0){e.push(d/l);for(f=0;f<k;++f){a[f]/=l}c.push(a);d=0;for(f=0,a=[];f<k;++f){a[f]=0}}}return{x:e,y:c}},getBounds:function(){var w=this,l=w.chart,h=l.getChartStore(),g=[].concat(w.yField),y=g.length,o=[],e=[],x=Infinity,u=x,s=x,t=-x,r=-x,d=Math,v=d.min,B=d.max,a,A,c,m,p,z,j,i,f,k,q,b,n;w.setBBox();a=w.bbox;if(w.axis){b=l.axes.get(w.axis);if(b){n=b.calcEnds();s=n.from||b.prevMin;r=B(n.to||b.prevMax,0)}}if(w.yField&&!Ext.isNumber(s)){b=new Ext.chart.axis.Axis({chart:l,fields:[].concat(w.yField)});n=b.calcEnds();s=n.from||b.prevMin;r=B(n.to||b.prevMax,0)}if(!Ext.isNumber(s)){s=0}if(!Ext.isNumber(r)){r=0}h.each(function(C,D){m=C.get(w.xField);p=[];if(typeof m!="number"){m=D}o.push(m);j=0;for(z=0;z<y;z++){if(w.__excludes[z]){continue}q=C.get(g[z]);if(typeof q=="number"){s=v(s,q);p.push(q);j+=q}}u=v(u,m);t=B(t,m);r=B(r,j);e.push(p)},w);A=a.width/((t-u)||1);c=a.height/((r-s)||1);i=o.length;if((i>a.width)&&w.areas){f=w.shrink(o,e,a.width);o=f.x;e=f.y}return{bbox:a,minX:u,minY:s,xValues:o,yValues:e,xScale:A,yScale:c,areasLen:y}},getPaths:function(){var v=this,l=v.chart,c=l.getChartStore(),e=true,f=v.getBounds(),a=f.bbox,m=v.items=[],u=[],b,d=0,o=[],r,h,j,g,p,s,k,w,q,t,n;h=f.xValues.length;for(r=0;r<h;r++){p=f.xValues[r];s=f.yValues[r];j=a.x+(p-f.minX)*f.xScale;k=0;d=0;for(w=0;w<f.areasLen;w++){if(v.__excludes[w]){continue}if(!u[w]){u[w]=[]}t=s[d];k+=t;g=a.y+a.height-(k-f.minY)*f.yScale;if(!o[w]){o[w]=["M",j,g];u[w].push(["L",j,g])}else{o[w].push("L",j,g);u[w].push(["L",j,g])}if(!m[w]){m[w]={pointsUp:[],pointsDown:[],series:v}}m[w].pointsUp.push([j,g]);d++}}for(w=0;w<f.areasLen;w++){if(v.__excludes[w]){continue}n=o[w];if(w==0||e){e=false;n.push("L",j,a.y+a.height,"L",a.x,a.y+a.height,"Z")}else{b=u[q];b.reverse();n.push("L",j,b[0][2]);for(r=0;r<h;r++){n.push(b[r][0],b[r][1],b[r][2]);m[w].pointsDown[h-r-1]=[b[r][1],b[r][2]]}n.push("L",a.x,n[2],"Z")}q=w}return{paths:o,areasLen:f.areasLen}},drawSeries:function(){var g=this,f=g.chart,h=f.getChartStore(),c=f.surface,b=f.animate,j=g.group,a=Ext.apply(g.seriesStyle,g.style),k=g.colorArrayStyle,n=k&&k.length||0,d,e,m,l,i;g.unHighlightItem();g.cleanHighlights();if(!h||!h.getCount()||g.seriesIsHidden){g.hide();g.items=[];return}m=g.getPaths();if(!g.areas){g.areas=[]}for(d=0;d<m.areasLen;d++){if(g.__excludes[d]){continue}if(!g.areas[d]){g.items[d].sprite=g.areas[d]=c.add(Ext.apply({},{type:"path",group:j,path:m.paths[d],stroke:a.stroke||k[d%n],fill:k[d%n]},a||{}))}e=g.areas[d];l=m.paths[d];if(b){i=g.renderer(e,false,{path:l,fill:k[d%n],stroke:a.stroke||k[d%n]},d,h);g.animation=g.onAnimate(e,{to:i})}else{i=g.renderer(e,false,{path:l,hidden:false,fill:k[d%n],stroke:a.stroke||k[d%n]},d,h);g.areas[d].setAttributes(i,true)}}g.renderLabels();g.renderCallouts()},onAnimate:function(b,a){b.show();return this.callParent(arguments)},onCreateLabel:function(d,j,c,e){var f=this,g=f.labelsGroup,a=f.label,h=f.bbox,b=Ext.apply(a,f.seriesLabelStyle);return f.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:g,x:j.point[0],y:h.y+h.height/2},b||{}))},onPlaceLabel:function(f,j,r,o,n,c,e){var t=this,k=t.chart,q=k.resizing,s=t.label,p=s.renderer,b=s.field,a=t.bbox,h=r.point[0],g=r.point[1],d,m,l;f.setAttributes({text:p(j.get(b[e])),hidden:true},true);d=f.getBBox();m=d.width/2;l=d.height/2;h=h-m<a.x?a.x+m:h;h=(h+m>a.x+a.width)?(h-(h+m-a.x-a.width)):h;g=g-l<a.y?a.y+l:g;g=(g+l>a.y+a.height)?(g-(g+l-a.y-a.height)):g;if(t.chart.animate&&!t.chart.resizing){f.show(true);t.onAnimate(f,{to:{x:h,y:g}})}else{f.setAttributes({x:h,y:g},true);if(q){t.animation.on("afteranimate",function(){f.show(true)})}else{f.show(true)}}},onPlaceCallout:function(l,q,I,F,E,d,j){var L=this,r=L.chart,C=r.surface,G=r.resizing,K=L.callouts,s=L.items,u=(F==0)?false:s[F-1].point,w=(F==s.length-1)?false:s[F+1].point,c=I.point,z,f,M,J,n,o,b=l.label.getBBox(),H=30,B=10,A=3,g,e,h,v,t,D=L.clipRect,m,k;if(!u){u=c}if(!w){w=c}J=(w[1]-u[1])/(w[0]-u[0]);n=(c[1]-u[1])/(c[0]-u[0]);o=(w[1]-c[1])/(w[0]-c[0]);f=Math.sqrt(1+J*J);z=[1/f,J/f];M=[-z[1],z[0]];if(n>0&&o<0&&M[1]<0||n<0&&o>0&&M[1]>0){M[0]*=-1;M[1]*=-1}else{if(Math.abs(n)<Math.abs(o)&&M[0]<0||Math.abs(n)>Math.abs(o)&&M[0]>0){M[0]*=-1;M[1]*=-1}}m=c[0]+M[0]*H;k=c[1]+M[1]*H;g=m+(M[0]>0?0:-(b.width+2*A));e=k-b.height/2-A;h=b.width+2*A;v=b.height+2*A;if(g<D[0]||(g+h)>(D[0]+D[2])){M[0]*=-1}if(e<D[1]||(e+v)>(D[1]+D[3])){M[1]*=-1}m=c[0]+M[0]*H;k=c[1]+M[1]*H;g=m+(M[0]>0?0:-(b.width+2*A));e=k-b.height/2-A;h=b.width+2*A;v=b.height+2*A;l.lines.setAttributes({path:["M",c[0],c[1],"L",m,k,"Z"]},true);l.box.setAttributes({x:g,y:e,width:h,height:v},true);l.label.setAttributes({x:m+(M[0]>0?A:-(b.width+A)),y:k},true);for(t in l){l[t].show(true)}},isItemInPoint:function(h,g,l,c){var f=this,b=l.pointsUp,d=l.pointsDown,o=Math.abs,n=false,k=false,e=Infinity,a,m,j;for(a=0,m=b.length;a<m;a++){j=[b[a][0],b[a][1]];n=false;k=a==m-1;if(e>o(h-j[0])){e=o(h-j[0]);n=true;if(k){++a}}if(!n||(n&&k)){j=b[a-1];if(g>=j[1]&&(!d.length||g<=(d[a-1][1]))){l.storeIndex=a-1;l.storeField=f.yField[c];l.storeItem=f.chart.store.getAt(a-1);l._points=d.length?[j,d[a-1]]:[j];return true}else{break}}}return false},highlightSeries:function(){var a,c,b;if(this._index!==undefined){a=this.areas[this._index];if(a.__highlightAnim){a.__highlightAnim.paused=true}a.__highlighted=true;a.__prevOpacity=a.__prevOpacity||a.attr.opacity||1;a.__prevFill=a.__prevFill||a.attr.fill;a.__prevLineWidth=a.__prevLineWidth||a.attr.lineWidth;b=Ext.draw.Color.fromString(a.__prevFill);c={lineWidth:(a.__prevLineWidth||0)+2};if(b){c.fill=b.getLighter(0.2).toString()}else{c.opacity=Math.max(a.__prevOpacity-0.3,0)}if(this.chart.animate){a.__highlightAnim=new Ext.fx.Anim(Ext.apply({target:a,to:c},this.chart.animate))}else{a.setAttributes(c,true)}}},unHighlightSeries:function(){var a;if(this._index!==undefined){a=this.areas[this._index];if(a.__highlightAnim){a.__highlightAnim.paused=true}if(a.__highlighted){a.__highlighted=false;a.__highlightAnim=new Ext.fx.Anim({target:a,to:{fill:a.__prevFill,opacity:a.__prevOpacity,lineWidth:a.__prevLineWidth}})}}},highlightItem:function(c){var b=this,a,d;if(!c){this.highlightSeries();return}a=c._points;d=a.length==2?["M",a[0][0],a[0][1],"L",a[1][0],a[1][1]]:["M",a[0][0],a[0][1],"L",a[0][0],b.bbox.y+b.bbox.height];b.highlightSprite.setAttributes({path:d,hidden:false},true)},unHighlightItem:function(a){if(!a){this.unHighlightSeries()}if(this.highlightSprite){this.highlightSprite.hide(true)}},hideAll:function(){var a=this;if(!isNaN(a._index)){a.__excludes[a._index]=true;a.areas[a._index].hide(true);a.redraw()}},showAll:function(){var a=this;if(!isNaN(a._index)){a.__excludes[a._index]=false;a.areas[a._index].show(true);a.redraw()}},redraw:function(){var a=this,b;b=a.chart.legend.rebuild;a.chart.legend.rebuild=false;a.chart.redraw();a.chart.legend.rebuild=b},hide:function(){if(this.areas){var g=this,b=g.areas,d,c,a,f,e;if(b&&b.length){for(d=0,f=b.length;d<f;++d){if(b[d]){b[d].hide(true)}}g.hideLabels()}}},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Bar",{extend:"Ext.chart.series.Cartesian",alternateClassName:["Ext.chart.BarSeries","Ext.chart.BarChart","Ext.chart.StackedBarChart"],requires:["Ext.chart.axis.Axis","Ext.fx.Anim"],type:"bar",alias:"series.bar",column:false,style:{},gutter:38.2,groupGutter:38.2,xPadding:0,yPadding:10,constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,f=e.chart.shadow,d,b;c.highlightCfg=Ext.Object.merge({lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"},c.highlightCfg);Ext.apply(e,c,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:1.2}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:0.9}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:0.6}}]});e.group=a.getGroup(e.seriesId+"-bars");if(f){for(d=0,b=e.shadowAttributes.length;d<b;d++){e.shadowGroups.push(a.getGroup(e.seriesId+"-shadows"+d))}}},getBarGirth:function(){var d=this,a=d.chart.getChartStore(),b=d.column,c=a.getCount(),e=d.gutter/100;return(d.chart.chartBBox[b?"width":"height"]-d[b?"xPadding":"yPadding"]*2)/(c*(e+1)-e)},getGutters:function(){var b=this,a=b.column,c=Math.ceil(b[a?"xPadding":"yPadding"]+b.getBarGirth()/2);return b.column?[c,0]:[0,c]},getBounds:function(){var z=this,p=z.chart,i=p.getChartStore(),q=[].concat(z.yField),c=q.length,k=c,h=z.groupGutter/100,f=z.column,n=z.xPadding,b=z.yPadding,w=z.stacked,o=z.getBarGirth(),g=Math,C=g.max,u=g.abs,y,a,x,v,e,s,A,m,B,l,r,t,d;z.setBBox(true);a=z.bbox;if(z.__excludes){for(r=0,B=z.__excludes.length;r<B;r++){if(z.__excludes[r]){k--}}}if(z.axis){e=p.axes.get(z.axis);if(e){s=e.calcEnds();x=s.from;v=s.to}}if(z.yField&&!Ext.isNumber(x)){e=new Ext.chart.axis.Axis({chart:p,fields:[].concat(z.yField)});s=e.calcEnds();x=s.from;v=s.to}if(!Ext.isNumber(x)){x=0}if(!Ext.isNumber(v)){v=0}A=(f?a.height-b*2:a.width-n*2)/(v-x);y=o/((w?1:k)*(h+1)-h);m=(f)?a.y+a.height-b:a.x+n;if(w){B=[[],[]];i.each(function(j,D){B[0][D]=B[0][D]||0;B[1][D]=B[1][D]||0;for(r=0;r<c;r++){if(z.__excludes&&z.__excludes[r]){continue}l=j.get(q[r]);B[+(l>0)][D]+=u(l)}});B[+(v>0)].push(u(v));B[+(x>0)].push(u(x));d=C.apply(g,B[0]);t=C.apply(g,B[1]);A=(f?a.height-b*2:a.width-n*2)/(t+d);m=m+d*A*(f?-1:1)}else{if(x/v<0){m=m-x*A*(f?-1:1)}}return{bars:q,bbox:a,barsLen:c,groupBarsLen:k,barWidth:o,groupBarWidth:y,scale:A,zero:m,xPadding:n,yPadding:b,signed:x/v<0,minY:x,maxY:v}},getPaths:function(){var t=this,P=t.chart,b=P.getChartStore(),C=t.bounds=t.getBounds(),x=t.items=[],J=t.yField,i=t.gutter/100,c=t.groupGutter/100,N=P.animate,H=t.column,v=t.group,k=P.shadow,L=t.shadowGroups,K=t.shadowAttributes,o=L.length,w=C.bbox,l=t.xPadding,p=t.yPadding,M=t.stacked,u=C.barsLen,I=t.colorArrayStyle,g=I&&I.length||0,z=Math,m=z.max,E=z.min,s=z.abs,O,Q,e,F,A,a,h,r,q,n,f,d,B,y,G,D;b.each(function(j,R,S){a=C.zero;h=C.zero;F=0;A=0;r=false;for(O=0,f=0;O<u;O++){if(t.__excludes&&t.__excludes[O]){continue}Q=j.get(C.bars[O]);e=Math.round((Q-m(C.minY,0))*C.scale);q={fill:I[(u>1?O:0)%g]};if(H){Ext.apply(q,{height:e,width:m(C.groupBarWidth,0),x:(w.x+l+R*C.barWidth*(1+i)+f*C.groupBarWidth*(1+c)*!M),y:a-e})}else{G=(S-1)-R;Ext.apply(q,{height:m(C.groupBarWidth,0),width:e+(a==C.zero),x:a+(a!=C.zero),y:(w.y+p+G*C.barWidth*(1+i)+f*C.groupBarWidth*(1+c)*!M+1)})}if(e<0){if(H){q.y=h;q.height=s(e)}else{q.x=h+e;q.width=s(e)}}if(M){if(e<0){h+=e*(H?-1:1)}else{a+=e*(H?-1:1)}F+=s(e);if(e<0){A+=s(e)}}q.x=Math.floor(q.x)+1;D=Math.floor(q.y);if(!Ext.isIE9&&q.y>D){D--}q.y=D;q.width=Math.floor(q.width);q.height=Math.floor(q.height);x.push({series:t,yField:J[O],storeItem:j,value:[j.get(t.xField),Q],attr:q,point:H?[q.x+q.width/2,Q>=0?q.y:q.y+q.height]:[Q>=0?q.x+q.width:q.x,q.y+q.height/2]});if(N&&P.resizing){n=H?{x:q.x,y:C.zero,width:q.width,height:0}:{x:C.zero,y:q.y,width:0,height:q.height};if(k&&(M&&!r||!M)){r=true;for(d=0;d<o;d++){B=L[d].getAt(M?R:(R*u+O));if(B){B.setAttributes(n,true)}}}y=v.getAt(R*u+O);if(y){y.setAttributes(n,true)}}f++}if(M&&x.length){x[R*f].totalDim=F;x[R*f].totalNegDim=A}},t)},renderShadows:function(t,u,x,k){var y=this,o=y.chart,r=o.surface,f=o.animate,w=y.stacked,a=y.shadowGroups,v=y.shadowAttributes,n=a.length,g=o.getChartStore(),d=y.column,q=y.items,b=[],l=k.zero,e,p,h,z,m,s,c;if((w&&(t%k.groupBarsLen===0))||!w){s=t/k.groupBarsLen;for(e=0;e<n;e++){p=Ext.apply({},v[e]);h=a[e].getAt(w?s:t);Ext.copyTo(p,u,"x,y,width,height");if(!h){h=r.add(Ext.apply({type:"rect",group:a[e]},Ext.apply({},x,p)))}if(w){z=q[t].totalDim;m=q[t].totalNegDim;if(d){p.y=l-m;p.height=z}else{p.x=l-m;p.width=z}}if(f){if(!w){c=y.renderer(h,g.getAt(s),p,t,g);y.onAnimate(h,{to:c})}else{c=y.renderer(h,g.getAt(s),Ext.apply(p,{hidden:true}),t,g);h.setAttributes(c,true)}}else{c=y.renderer(h,g.getAt(s),Ext.apply(p,{hidden:false}),t,g);h.setAttributes(c,true)}b.push(h)}}return b},drawSeries:function(){var B=this,q=B.chart,l=q.getChartStore(),u=q.surface,h=q.animate,z=B.stacked,d=B.column,b=q.shadow,a=B.shadowGroups,p=a.length,n=B.group,f=B.seriesStyle,r,o,x,w,A,s,c,e,g,m,k,y,t,v;if(!l||!l.getCount()||B.seriesIsHidden){B.hide();B.items=[];return}delete f.fill;k=Ext.apply(f,this.style);B.unHighlightItem();B.cleanHighlights();B.getPaths();m=B.bounds;r=B.items;A=d?{y:m.zero,height:0}:{x:m.zero,width:0};o=r.length;for(x=0;x<o;x++){s=n.getAt(x);y=r[x].attr;if(b){r[x].shadows=B.renderShadows(x,y,A,m)}if(!s){t=Ext.apply({},A,y);t=Ext.apply(t,k||{});s=u.add(Ext.apply({},{type:"rect",group:n},t))}if(h){c=B.renderer(s,l.getAt(x),y,x,l);s._to=c;v=B.onAnimate(s,{to:Ext.apply(c,k)});if(b&&z&&(x%m.barsLen===0)){w=x/m.barsLen;for(e=0;e<p;e++){v.on("afteranimate",function(){this.show(true)},a[e].getAt(w))}}}else{c=B.renderer(s,l.getAt(x),Ext.apply(y,{hidden:false}),x,l);s.setAttributes(Ext.apply(c,k),true)}r[x].sprite=s}o=n.getCount();for(w=x;w<o;w++){n.getAt(w).hide(true)}if(b){for(e=0;e<p;e++){g=a[e];o=g.getCount();for(w=x;w<o;w++){g.getAt(w).hide(true)}}}B.renderLabels()},onCreateLabel:function(e,k,d,f){var g=this,a=g.chart.surface,j=g.labelsGroup,b=g.label,c=Ext.apply({},b,g.seriesLabelStyle||{}),h;return a.add(Ext.apply({type:"text",group:j},c||{}))},onPlaceLabel:function(F,M,r,I,o,G,H,u){var l=this,m=l.bounds,d=m.groupBarWidth,E=l.column,K=l.chart,t=K.chartBBox,z=K.resizing,n=r.value[0],N=r.value[1],k=r.attr,w=l.label,J=w.orientation=="vertical",g=[].concat(w.field),s=w.renderer,q=s(M.get(g[u])),f=l.getLabelSize(q),a=f.width,c=f.height,b=m.zero,h="outside",p="insideStart",L="insideEnd",D=10,B=6,e=m.signed,C,A,v;F.setAttributes({text:q});F.isOutside=false;if(E){if(o==h){if(c+B+k.height>(N>=0?b-t.y:t.y+t.height-b)){o=L}}else{if(c+B>k.height){o=h;F.isOutside=true}}C=k.x+d/2;A=o==p?(b+((c/2+3)*(N>=0?-1:1))):(N>=0?(k.y+((c/2+3)*(o==h?-1:1))):(k.y+k.height+((c/2+3)*(o===h?1:-1))))}else{if(o==h){if(a+D+k.width>(N>=0?t.x+t.width-b:b-t.x)){o=L}}else{if(a+D>k.width){o=h;F.isOutside=true}}C=o==p?(b+((a/2+5)*(N>=0?1:-1))):(N>=0?(k.x+k.width+((a/2+5)*(o===h?1:-1))):(k.x+((a/2+5)*(o===h?-1:1))));A=k.y+d/2}v={x:C,y:A};if(J){v.rotate={x:C,y:A,degrees:270}}if(G&&z){if(E){C=k.x+k.width/2;A=b}else{C=b;A=k.y+k.height/2}F.setAttributes({x:C,y:A},true);if(J){F.setAttributes({rotate:{x:C,y:A,degrees:270}},true)}}if(G){l.onAnimate(F,{to:v})}else{F.setAttributes(Ext.apply(v,{hidden:false}),true)}},getLabelSize:function(f){var j=this.testerLabel,a=this.label,d=Ext.apply({},a,this.seriesLabelStyle||{}),b=a.orientation==="vertical",i,g,e,c;if(!j){j=this.testerLabel=this.chart.surface.add(Ext.apply({type:"text",opacity:0},d))}j.setAttributes({text:f},true);i=j.getBBox();g=i.width;e=i.height;return{width:b?e:g,height:b?g:e}},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(a,d,b){var c=b.sprite.getBBox();return c.x<=a&&c.y<=d&&(c.x+c.width)>=a&&(c.y+c.height)>=d},hideAll:function(){var a=this.chart.axes;if(!isNaN(this._index)){if(!this.__excludes){this.__excludes=[]}this.__excludes[this._index]=true;this.drawSeries();a.each(function(b){b.drawAxis()})}},showAll:function(){var a=this.chart.axes;if(!isNaN(this._index)){if(!this.__excludes){this.__excludes=[]}this.__excludes[this._index]=false;this.drawSeries();a.each(function(b){b.drawAxis()})}},getLegendColor:function(a){var c=this,b=c.colorArrayStyle.length;if(c.style&&c.style.fill){return c.style.fill}else{return c.colorArrayStyle[a%b]}},highlightItem:function(a){this.callParent(arguments);this.renderLabels()},unHighlightItem:function(){this.callParent(arguments);this.renderLabels()},cleanHighlights:function(){this.callParent(arguments);this.renderLabels()}});Ext.define("Ext.chart.series.Column",{alternateClassName:["Ext.chart.ColumnSeries","Ext.chart.ColumnChart","Ext.chart.StackedColumnChart"],extend:"Ext.chart.series.Bar",type:"column",alias:"series.column",column:true,xPadding:10,yPadding:0});Ext.define("Ext.chart.series.Gauge",{extend:"Ext.chart.series.Series",type:"gauge",alias:"series.gauge",rad:Math.PI/180,highlightDuration:150,angleField:false,needle:false,donut:false,showInLegend:false,style:{},constructor:function(b){this.callParent(arguments);var g=this,f=g.chart,a=f.surface,h=f.store,j=f.shadow,d,c,e;Ext.apply(g,b,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:1}}]});g.group=a.getGroup(g.seriesId);if(j){for(d=0,c=g.shadowAttributes.length;d<c;d++){g.shadowGroups.push(a.getGroup(g.seriesId+"-shadows"+d))}}a.customAttributes.segment=function(i){return g.getSegment(i)}},initialize:function(){var b=this,a=b.chart.getChartStore();b.yField=[];if(b.label.field){a.each(function(c){b.yField.push(c.get(b.label.field))})}},getSegment:function(b){var B=this,A=B.rad,d=Math.cos,a=Math.sin,m=Math.abs,j=B.centerX,h=B.centerY,v=0,u=0,t=0,q=0,g=0,f=0,e=0,c=0,w=0.01,l=b.endRho-b.startRho,p=b.startAngle,o=b.endAngle,i=(p+o)/2*A,k=b.margin||0,s=m(o-p)>180,C=Math.min(p,o)*A,z=Math.max(p,o)*A,n=false;j+=k*d(i);h+=k*a(i);v=j+b.startRho*d(C);g=h+b.startRho*a(C);u=j+b.endRho*d(C);f=h+b.endRho*a(C);t=j+b.startRho*d(z);e=h+b.startRho*a(z);q=j+b.endRho*d(z);c=h+b.endRho*a(z);if(m(v-t)<=w&&m(g-e)<=w){n=true}if(n){return{path:[["M",v,g],["L",u,f],["A",b.endRho,b.endRho,0,+s,1,q,c],["Z"]]}}else{return{path:[["M",v,g],["L",u,f],["A",b.endRho,b.endRho,0,+s,1,q,c],["L",t,e],["A",b.startRho,b.startRho,0,+s,0,v,g],["Z"]]}}},calcMiddle:function(o){var j=this,k=j.rad,n=o.slice,m=j.centerX,l=j.centerY,i=n.startAngle,e=n.endAngle,h=Math.max(("rho" in n)?n.rho:j.radius,j.label.minMargin),g=+j.donut,b=Math.min(i,e)*k,a=Math.max(i,e)*k,d=-(b+(a-b)/2),f=m+(o.endRho+o.startRho)/2*Math.cos(d),c=l-(o.endRho+o.startRho)/2*Math.sin(d);o.middle={x:f,y:c}},drawSeries:function(){var v=this,V=v.chart,b=V.getChartStore(),z=v.group,R=v.chart.animate,C=v.chart.axes.get(0),D=C&&C.minimum||v.minimum||0,H=C&&C.maximum||v.maximum||0,m=v.angleField||v.field||v.xField,L=V.surface,G=V.chartBBox,g=v.rad,c=+v.donut,W={},A=[],l=v.seriesStyle,a=v.seriesLabelStyle,f=v.colorArrayStyle,y=f&&f.length||0,J=V.maxGutter[0],I=V.maxGutter[1],h=Math.cos,r=Math.sin,s,e,d,u,q,B,N,E,F,K,T,S,k,U,w,n,P,Q,o,x,t,O,M;Ext.apply(l,v.style||{});v.setBBox();x=v.bbox;if(v.colorSet){f=v.colorSet;y=f.length}if(!b||!b.getCount()||v.seriesIsHidden){v.hide();v.items=[];return}e=v.centerX=G.x+(G.width/2);d=v.centerY=G.y+G.height;v.radius=Math.min(e-G.x,d-G.y);v.slices=q=[];v.items=A=[];if(!v.value){K=b.getAt(0);v.value=K.get(m)}N=v.value;if(v.needle){O={series:v,value:N,startAngle:-180,endAngle:0,rho:v.radius};t=-180*(1-(N-D)/(H-D));q.push(O)}else{t=-180*(1-(N-D)/(H-D));O={series:v,value:N,startAngle:-180,endAngle:t,rho:v.radius};M={series:v,value:v.maximum-N,startAngle:t,endAngle:0,rho:v.radius};q.push(O,M)}for(T=0,F=q.length;T<F;T++){u=q[T];B=z.getAt(T);s=Ext.apply({segment:{startAngle:u.startAngle,endAngle:u.endAngle,margin:0,rho:u.rho,startRho:u.rho*+c/100,endRho:u.rho}},Ext.apply(l,f&&{fill:f[T%y]}||{}));E=Ext.apply({},s.segment,{slice:u,series:v,storeItem:K,index:T});A[T]=E;if(!B){o=Ext.apply({type:"path",group:z},Ext.apply(l,f&&{fill:f[T%y]}||{}));B=L.add(Ext.apply(o,s))}u.sprite=u.sprite||[];E.sprite=B;u.sprite.push(B);if(R){s=v.renderer(B,K,s,T,b);B._to=s;v.onAnimate(B,{to:s})}else{s=v.renderer(B,K,Ext.apply(s,{hidden:false}),T,b);B.setAttributes(s,true)}}if(v.needle){t=t*Math.PI/180;if(!v.needleSprite){v.needleSprite=v.chart.surface.add({type:"path",path:["M",e+(v.radius*+c/100)*h(t),d+-Math.abs((v.radius*+c/100)*r(t)),"L",e+v.radius*h(t),d+-Math.abs(v.radius*r(t))],"stroke-width":4,stroke:"#222"})}else{if(R){v.onAnimate(v.needleSprite,{to:{path:["M",e+(v.radius*+c/100)*h(t),d+-Math.abs((v.radius*+c/100)*r(t)),"L",e+v.radius*h(t),d+-Math.abs(v.radius*r(t))]}})}else{v.needleSprite.setAttributes({type:"path",path:["M",e+(v.radius*+c/100)*h(t),d+-Math.abs((v.radius*+c/100)*r(t)),"L",e+v.radius*h(t),d+-Math.abs(v.radius*r(t))]})}}v.needleSprite.setAttributes({hidden:false},true)}delete v.value},setValue:function(a){this.value=a;this.drawSeries()},onCreateLabel:function(c,b,a,d){},onPlaceLabel:function(c,f,e,d,g,a,b){},onPlaceCallout:function(){},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(k,h,m,e){var g=this,d=g.centerX,c=g.centerY,o=Math.abs,n=o(k-d),l=o(h-c),f=m.startAngle,a=m.endAngle,j=Math.sqrt(n*n+l*l),b=Math.atan2(h-c,k-d)/g.rad;return(e===0)&&(b>=f&&b<a&&j>=m.startRho&&j<=m.endRho)},showAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=false;this.drawSeries()}},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Line",{extend:"Ext.chart.series.Cartesian",alternateClassName:["Ext.chart.LineSeries","Ext.chart.LineChart"],requires:["Ext.chart.axis.Axis","Ext.chart.Shape","Ext.draw.Draw","Ext.fx.Anim"],type:"line",alias:"series.line",selectionTolerance:20,showMarkers:true,markerConfig:{},style:{},smooth:false,defaultSmoothness:3,fill:false,constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,f=e.chart.shadow,d,b;c.highlightCfg=Ext.Object.merge({"stroke-width":3},c.highlightCfg);Ext.apply(e,c,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}}]});e.group=a.getGroup(e.seriesId);if(e.showMarkers){e.markerGroup=a.getGroup(e.seriesId+"-markers")}if(f){for(d=0,b=e.shadowAttributes.length;d<b;d++){e.shadowGroups.push(a.getGroup(e.seriesId+"-shadows"+d))}}},shrink:function(b,j,k){var g=b.length,h=Math.floor(g/k),f=1,d=0,a=0,e=[b[0]],c=[j[0]];for(;f<g;++f){d+=b[f]||0;a+=j[f]||0;if(f%h==0){e.push(d/h);c.push(a/h);d=0;a=0}}return{x:e,y:c}},drawSeries:function(){var aj=this,at=aj.chart,S=at.axes,an=at.getChartStore(),V=an.getCount(),u=aj.chart.surface,al={},R=aj.group,K=aj.showMarkers,az=aj.markerGroup,D=at.shadow,C=aj.shadowGroups,X=aj.shadowAttributes,O=aj.smooth,q=C.length,aq=["M"],T=["M"],d=["M"],b=["M"],J=at.markerIndex,ai=[].concat(aj.axis),ah,au=[],ag={},aa=[],v={},I=false,Q=[],ay=aj.markerStyle,Z=aj.seriesStyle,t=aj.colorArrayStyle,P=t&&t.length||0,L=Ext.isNumber,av=aj.seriesIdx,g=aj.getAxesForXAndYFields(),l=g.xAxis,ax=g.yAxis,ac,h,ab,ad,A,c,ae,H,G,f,e,s,r,W,N,M,ar,m,F,E,aA,n,p,B,a,Y,af,z,ap,w,ao,o,aw,am,ak,U,k;if(aj.fireEvent("beforedraw",aj)===false){return}if(!V||aj.seriesIsHidden){aj.hide();aj.items=[];if(aj.line){aj.line.hide(true);if(aj.line.shadows){ac=aj.line.shadows;for(M=0,q=ac.length;M<q;M++){h=ac[M];h.hide(true)}}if(aj.fillPath){aj.fillPath.hide(true)}}aj.line=null;aj.fillPath=null;return}am=Ext.apply(ay||{},aj.markerConfig,{fill:aj.seriesStyle.fill||t[av%t.length]});U=am.type;delete am.type;ak=Z;if(!ak["stroke-width"]){ak["stroke-width"]=0.5}if(J&&az&&az.getCount()){for(N=0;N<J;N++){E=az.getAt(N);az.remove(E);az.add(E);aA=az.getAt(az.getCount()-2);E.setAttributes({x:0,y:0,translate:{x:aA.attr.translation.x,y:aA.attr.translation.y}},true)}}aj.unHighlightItem();aj.cleanHighlights();aj.setBBox();al=aj.bbox;aj.clipRect=[al.x,al.y,al.width,al.height];for(N=0,ar=ai.length;N<ar;N++){m=S.get(ai[N]);if(m){F=m.calcEnds();if(m.position=="top"||m.position=="bottom"){z=F.from;ap=F.to}else{w=F.from;ao=F.to}}}if(aj.xField&&!L(z)&&(l=="bottom"||l=="top")&&!S.get(l)){m=Ext.create("Ext.chart.axis.Axis",{chart:at,fields:[].concat(aj.xField)}).calcEnds();z=m.from;ap=m.to}if(aj.yField&&!L(w)&&(ax=="right"||ax=="left")&&!S.get(ax)){m=Ext.create("Ext.chart.axis.Axis",{chart:at,fields:[].concat(aj.yField)}).calcEnds();w=m.from;ao=m.to}if(isNaN(z)){z=0;Y=al.width/((V-1)||1)}else{Y=al.width/((ap-z)||(V-1)||1)}if(isNaN(w)){w=0;af=al.height/((V-1)||1)}else{af=al.height/((ao-w)||(V-1)||1)}aj.eachRecord(function(j,x){p=j.get(aj.xField);if(typeof p=="string"||typeof p=="object"&&!Ext.isDate(p)||l&&S.get(l)&&S.get(l).type=="Category"){if(p in ag){p=ag[p]}else{p=ag[p]=x}}B=j.get(aj.yField);if(typeof B=="undefined"||(typeof B=="string"&&!B)){return}if(typeof B=="string"||typeof B=="object"&&!Ext.isDate(B)||ax&&S.get(ax)&&S.get(ax).type=="Category"){B=x}Q.push(x);au.push(p);aa.push(B)});ar=au.length;if(ar>al.width){a=aj.shrink(au,aa,al.width);au=a.x;aa=a.y}aj.items=[];k=0;ar=au.length;for(N=0;N<ar;N++){p=au[N];B=aa[N];if(B===false){if(T.length==1){T=[]}I=true;aj.items.push(false);continue}else{H=(al.x+(p-z)*Y).toFixed(2);G=((al.y+al.height)-(B-w)*af).toFixed(2);if(I){I=false;T.push("M")}T=T.concat([H,G])}if((typeof r=="undefined")&&(typeof G!="undefined")){r=G;s=H}if(!aj.line||at.resizing){aq=aq.concat([H,al.y+al.height/2])}if(at.animate&&at.resizing&&aj.line){aj.line.setAttributes({path:aq},true);if(aj.fillPath){aj.fillPath.setAttributes({path:aq,opacity:0.2},true)}if(aj.line.shadows){ac=aj.line.shadows;for(M=0,q=ac.length;M<q;M++){h=ac[M];h.setAttributes({path:aq},true)}}}if(K){E=az.getAt(k++);if(!E){E=Ext.chart.Shape[U](u,Ext.apply({group:[R,az],x:0,y:0,translate:{x:+(f||H),y:e||(al.y+al.height/2)},value:'"'+p+", "+B+'"',zIndex:4000},am));E._to={translate:{x:+H,y:+G}}}else{E.setAttributes({value:'"'+p+", "+B+'"',x:0,y:0,hidden:false},true);E._to={translate:{x:+H,y:+G}}}}aj.items.push({series:aj,value:[p,B],point:[H,G],sprite:E,storeItem:an.getAt(Q[N])});f=H;e=G}if(T.length<=1){return}if(aj.smooth){b=Ext.draw.Draw.smooth(T,L(O)?O:aj.defaultSmoothness)}d=O?b:T;if(at.markerIndex&&aj.previousPath){ad=aj.previousPath;if(!O){Ext.Array.erase(ad,1,2)}}else{ad=T}if(!aj.line){aj.line=u.add(Ext.apply({type:"path",group:R,path:aq,stroke:ak.stroke||ak.fill},ak||{}));if(D){aj.line.setAttributes(Ext.apply({},aj.shadowOptions),true)}aj.line.setAttributes({fill:"none",zIndex:3000});if(!ak.stroke&&P){aj.line.setAttributes({stroke:t[av%P]},true)}if(D){ac=aj.line.shadows=[];for(ab=0;ab<q;ab++){ah=X[ab];ah=Ext.apply({},ah,{path:aq});h=u.add(Ext.apply({},{type:"path",group:C[ab]},ah));ac.push(h)}}}if(aj.fill){c=d.concat([["L",H,al.y+al.height],["L",s,al.y+al.height],["L",s,r]]);if(!aj.fillPath){aj.fillPath=u.add({group:R,type:"path",opacity:ak.opacity||0.3,fill:ak.fill||t[av%P],path:aq})}}W=K&&az.getCount();if(at.animate){A=aj.fill;o=aj.line;ae=aj.renderer(o,false,{path:d},N,an);Ext.apply(ae,ak||{},{stroke:ak.stroke||ak.fill});delete ae.fill;o.show(true);if(at.markerIndex&&aj.previousPath){aj.animation=aw=aj.onAnimate(o,{to:ae,from:{path:ad}})}else{aj.animation=aw=aj.onAnimate(o,{to:ae})}if(D){ac=o.shadows;for(M=0;M<q;M++){ac[M].show(true);if(at.markerIndex&&aj.previousPath){aj.onAnimate(ac[M],{to:{path:d},from:{path:ad}})}else{aj.onAnimate(ac[M],{to:{path:d}})}}}if(A){aj.fillPath.show(true);aj.onAnimate(aj.fillPath,{to:Ext.apply({},{path:c,fill:ak.fill||t[av%P],"stroke-width":0},ak||{})})}if(K){k=0;for(N=0;N<ar;N++){if(aj.items[N]){n=az.getAt(k++);if(n){ae=aj.renderer(n,an.getAt(N),n._to,N,an);aj.onAnimate(n,{to:Ext.apply(ae,am||{})});n.show(true)}}}for(;k<W;k++){n=az.getAt(k);n.hide(true)}}}else{ae=aj.renderer(aj.line,false,{path:d,hidden:false},N,an);Ext.apply(ae,ak||{},{stroke:ak.stroke||ak.fill});delete ae.fill;aj.line.setAttributes(ae,true);if(D){ac=aj.line.shadows;for(M=0;M<q;M++){ac[M].setAttributes({path:d,hidden:false},true)}}if(aj.fill){aj.fillPath.setAttributes({path:c,hidden:false},true)}if(K){k=0;for(N=0;N<ar;N++){if(aj.items[N]){n=az.getAt(k++);if(n){ae=aj.renderer(n,an.getAt(N),n._to,N,an);n.setAttributes(Ext.apply(am||{},ae||{}),true);n.show(true)}}}for(;k<W;k++){n=az.getAt(k);n.hide(true)}}}if(at.markerIndex){if(aj.smooth){Ext.Array.erase(T,1,2)}else{Ext.Array.splice(T,1,0,T[1],T[2])}aj.previousPath=T}aj.renderLabels();aj.renderCallouts();aj.fireEvent("draw",aj)},onCreateLabel:function(d,j,c,e){var f=this,g=f.labelsGroup,a=f.label,h=f.bbox,b=Ext.apply(a,f.seriesLabelStyle);return f.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:g,x:j.point[0],y:h.y+h.height/2},b||{}))},onPlaceLabel:function(f,j,r,o,n,d){var t=this,k=t.chart,q=k.resizing,s=t.label,p=s.renderer,b=s.field,a=t.bbox,h=r.point[0],g=r.point[1],c=r.sprite.attr.radius,e,m,l;f.setAttributes({text:p(j.get(b)),hidden:true},true);if(n=="rotate"){f.setAttributes({"text-anchor":"start",rotation:{x:h,y:g,degrees:-45}},true);e=f.getBBox();m=e.width;l=e.height;h=h<a.x?a.x:h;h=(h+m>a.x+a.width)?(h-(h+m-a.x-a.width)):h;g=(g-l<a.y)?a.y+l:g}else{if(n=="under"||n=="over"){e=r.sprite.getBBox();e.width=e.width||(c*2);e.height=e.height||(c*2);g=g+(n=="over"?-e.height:e.height);e=f.getBBox();m=e.width/2;l=e.height/2;h=h-m<a.x?a.x+m:h;h=(h+m>a.x+a.width)?(h-(h+m-a.x-a.width)):h;g=g-l<a.y?a.y+l:g;g=(g+l>a.y+a.height)?(g-(g+l-a.y-a.height)):g}}if(t.chart.animate&&!t.chart.resizing){f.show(true);t.onAnimate(f,{to:{x:h,y:g}})}else{f.setAttributes({x:h,y:g},true);if(q&&t.animation){t.animation.on("afteranimate",function(){f.show(true)})}else{f.show(true)}}},highlightItem:function(){var a=this;a.callParent(arguments);if(a.line&&!a.highlighted){if(!("__strokeWidth" in a.line)){a.line.__strokeWidth=parseFloat(a.line.attr["stroke-width"])||0}if(a.line.__anim){a.line.__anim.paused=true}a.line.__anim=Ext.create("Ext.fx.Anim",{target:a.line,to:{"stroke-width":a.line.__strokeWidth+3}});a.highlighted=true}},unHighlightItem:function(){var a=this;a.callParent(arguments);if(a.line&&a.highlighted){a.line.__anim=Ext.create("Ext.fx.Anim",{target:a.line,to:{"stroke-width":a.line.__strokeWidth}});a.highlighted=false}},onPlaceCallout:function(l,q,I,F,E,d,j){if(!E){return}var L=this,r=L.chart,C=r.surface,G=r.resizing,K=L.callouts,s=L.items,u=F==0?false:s[F-1].point,w=(F==s.length-1)?false:s[F+1].point,c=[+I.point[0],+I.point[1]],z,f,M,J,n,o,H=K.offsetFromViz||30,B=K.offsetToSide||10,A=K.offsetBox||3,g,e,h,v,t,D=L.clipRect,b={width:K.styles.width||10,height:K.styles.height||10},m,k;if(!u){u=c}if(!w){w=c}J=(w[1]-u[1])/(w[0]-u[0]);n=(c[1]-u[1])/(c[0]-u[0]);o=(w[1]-c[1])/(w[0]-c[0]);f=Math.sqrt(1+J*J);z=[1/f,J/f];M=[-z[1],z[0]];if(n>0&&o<0&&M[1]<0||n<0&&o>0&&M[1]>0){M[0]*=-1;M[1]*=-1}else{if(Math.abs(n)<Math.abs(o)&&M[0]<0||Math.abs(n)>Math.abs(o)&&M[0]>0){M[0]*=-1;M[1]*=-1}}m=c[0]+M[0]*H;k=c[1]+M[1]*H;g=m+(M[0]>0?0:-(b.width+2*A));e=k-b.height/2-A;h=b.width+2*A;v=b.height+2*A;if(g<D[0]||(g+h)>(D[0]+D[2])){M[0]*=-1}if(e<D[1]||(e+v)>(D[1]+D[3])){M[1]*=-1}m=c[0]+M[0]*H;k=c[1]+M[1]*H;g=m+(M[0]>0?0:-(b.width+2*A));e=k-b.height/2-A;h=b.width+2*A;v=b.height+2*A;if(r.animate){L.onAnimate(l.lines,{to:{path:["M",c[0],c[1],"L",m,k,"Z"]}});if(l.panel){l.panel.setPosition(g,e,true)}}else{l.lines.setAttributes({path:["M",c[0],c[1],"L",m,k,"Z"]},true);if(l.panel){l.panel.setPosition(g,e)}}for(t in l){l[t].show(true)}},isItemInPoint:function(h,f,z,p){var B=this,m=B.items,r=B.selectionTolerance,j=null,w,c,o,u,g,v,b,s,a,k,A,e,d,n,t,q,C=Math.sqrt,l=Math.abs;c=m[p];w=p&&m[p-1];if(p>=g){w=m[g-1]}o=w&&w.point;u=c&&c.point;v=w?o[0]:u[0]-r;b=w?o[1]:u[1];s=c?u[0]:o[0]+r;a=c?u[1]:o[1];e=C((h-v)*(h-v)+(f-b)*(f-b));d=C((h-s)*(h-s)+(f-a)*(f-a));n=Math.min(e,d);if(n<=r){return n==e?w:c}return false},toggleAll:function(a){var e=this,b,d,f,c;if(!a){Ext.chart.series.Cartesian.prototype.hideAll.call(e)}else{Ext.chart.series.Cartesian.prototype.showAll.call(e)}if(e.line){e.line.setAttributes({hidden:!a},true);if(e.line.shadows){for(b=0,c=e.line.shadows,d=c.length;b<d;b++){f=c[b];f.setAttributes({hidden:!a},true)}}}if(e.fillPath){e.fillPath.setAttributes({hidden:!a},true)}},hideAll:function(){this.toggleAll(false)},showAll:function(){this.toggleAll(true)}});Ext.define("Ext.chart.series.Pie",{alternateClassName:["Ext.chart.PieSeries","Ext.chart.PieChart"],extend:"Ext.chart.series.Series",type:"pie",alias:"series.pie",rad:Math.PI/180,highlightDuration:150,angleField:false,lengthField:false,donut:false,showInLegend:false,style:{},constructor:function(b){this.callParent(arguments);var g=this,f=g.chart,a=f.surface,h=f.store,j=f.shadow,d,c,e;b.highlightCfg=Ext.merge({segment:{margin:20}},b.highlightCfg);Ext.apply(g,b,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:1}}]});g.group=a.getGroup(g.seriesId);if(j){for(d=0,c=g.shadowAttributes.length;d<c;d++){g.shadowGroups.push(a.getGroup(g.seriesId+"-shadows"+d))}}a.customAttributes.segment=function(k){var i=g.getSegment(k);if(!i.path||i.path.length===0){i.path=["M",0,0]}return i};g.__excludes=g.__excludes||[]},initialize:function(){var b=this,a=b.chart.getChartStore();b.yField=[];if(b.label.field){a.each(function(c){b.yField.push(c.get(b.label.field))})}},getSegment:function(d){var I=this,H=I.rad,h=Math.cos,a=Math.sin,o=I.centerX,m=I.centerY,D=0,C=0,B=0,z=0,k=0,j=0,i=0,f=0,v=0,c=0,u=0,b=0,F=0.01,w=d.startAngle,t=d.endAngle,n=(w+t)/2*H,q=d.margin||0,J=Math.min(w,t)*H,G=Math.max(w,t)*H,s=h(J),g=a(J),r=h(G),e=a(G),l=h(n),E=a(n),A=0,p=0.7071067811865476;if(G-J<F){return{path:""}}if(q!==0){o+=q*l;m+=q*E}C=o+d.endRho*s;j=m+d.endRho*g;z=o+d.endRho*r;f=m+d.endRho*e;u=o+d.endRho*l;b=m+d.endRho*E;if(d.startRho!==0){D=o+d.startRho*s;k=m+d.startRho*g;B=o+d.startRho*r;i=m+d.startRho*e;v=o+d.startRho*l;c=m+d.startRho*E;return{path:[["M",C,j],["A",d.endRho,d.endRho,0,0,1,u,b],["L",u,b],["A",d.endRho,d.endRho,0,A,1,z,f],["L",z,f],["L",B,i],["A",d.startRho,d.startRho,0,A,0,v,c],["L",v,c],["A",d.startRho,d.startRho,0,0,0,D,k],["L",D,k],["Z"]]}}else{return{path:[["M",o,m],["L",C,j],["A",d.endRho,d.endRho,0,0,1,u,b],["L",u,b],["A",d.endRho,d.endRho,0,A,1,z,f],["L",z,f],["L",o,m],["Z"]]}}},calcMiddle:function(m){var h=this,i=h.rad,l=m.slice,k=h.centerX,j=h.centerY,g=l.startAngle,d=l.endAngle,f=+h.donut,c=-(g+d)*i/2,a=(m.endRho+m.startRho)/2,e=k+a*Math.cos(c),b=j-a*Math.sin(c);m.middle={x:e,y:b}},drawSeries:function(){var x=this,b=x.chart.getChartStore(),D=x.group,ad=x.chart.animate,o=x.angleField||x.field||x.xField,G=[].concat(x.lengthField),ac=0,V=x.colorSet,ai=x.chart,S=ai.surface,N=ai.chartBBox,l=ai.shadow,aa=x.shadowGroups,Z=x.shadowAttributes,am=aa.length,g=x.rad,T=G.length,H=0,d=+x.donut,ak=[],al={},aj,E=[],h=false,A=0,W=0,k=9,an=true,z=0,n=x.seriesStyle,a=x.seriesLabelStyle,f=x.colorArrayStyle,C=f&&f.length||0,Q=ai.maxGutter[0],P=ai.maxGutter[1],L=Math.abs,u,ab,ah,I,O,K,e,c,v,r=0,w,t,F,U,J,ao,M,R,af,ae,m,ag,y,q,X,Y,s,B;Ext.apply(n,x.style||{});x.setBBox();B=x.bbox;if(x.colorSet){f=x.colorSet;C=f.length}if(!b||!b.getCount()||x.seriesIsHidden){x.hide();x.items=[];return}x.unHighlightItem();x.cleanHighlights();e=x.centerX=N.x+(N.width/2);c=x.centerY=N.y+(N.height/2);x.radius=Math.min(e-N.x,c-N.y);x.slices=t=[];x.items=E=[];b.each(function(j,p){if(this.__excludes&&this.__excludes[p]){return}A+=+j.get(o);if(G[0]){for(ae=0,ac=0;ae<T;ae++){ac+=+j.get(G[ae])}ak[p]=ac;W=Math.max(W,ac)}},this);A=A||1;b.each(function(j,p){if(this.__excludes&&this.__excludes[p]){U=0}else{U=j.get(o);if(r==0){r=1}}if(r==1){r=2;x.firstAngle=z=360*U/A/2;for(ae=0;ae<p;ae++){t[ae].startAngle=t[ae].endAngle=x.firstAngle}}ag=z-360*U/A;w={series:x,value:U,startAngle:z,endAngle:ag,storeItem:j};if(G[0]){ao=ak[p];w.rho=x.radius*(ao/W)}else{w.rho=x.radius}t[p]=w;z=ag},x);if(l){for(af=0,M=t.length;af<M;af++){w=t[af];w.shadowAttrs=[];for(ae=0,H=0,I=[];ae<T;ae++){F=D.getAt(af*T+ae);v=G[ae]?b.getAt(af).get(G[ae])/ak[af]*w.rho:w.rho;u={segment:{startAngle:w.startAngle,endAngle:w.endAngle,margin:0,rho:w.rho,startRho:H+(v*d/100),endRho:H+v},hidden:!w.value&&(w.startAngle%360)==(w.endAngle%360)};for(K=0,I=[];K<am;K++){ah=Z[K];O=aa[K].getAt(af);if(!O){O=ai.surface.add(Ext.apply({},{type:"path",group:aa[K],strokeLinejoin:"round"},u,ah))}if(ad){ah=x.renderer(O,b.getAt(af),Ext.apply({},u,ah),af,b);x.onAnimate(O,{to:ah})}else{ah=x.renderer(O,b.getAt(af),ah,af,b);O.setAttributes(ah,true)}I.push(O)}w.shadowAttrs[ae]=I}}}for(af=0,M=t.length;af<M;af++){w=t[af];for(ae=0,H=0;ae<T;ae++){F=D.getAt(af*T+ae);v=G[ae]?b.getAt(af).get(G[ae])/ak[af]*w.rho:w.rho;u=Ext.apply({segment:{startAngle:w.startAngle,endAngle:w.endAngle,margin:0,rho:w.rho,startRho:H+(v*d/100),endRho:H+v},hidden:(!w.value&&(w.startAngle%360)==(w.endAngle%360))},Ext.apply(n,f&&{fill:f[(T>1?ae:af)%C]}||{}));J=Ext.apply({},u.segment,{slice:w,series:x,storeItem:w.storeItem,index:af});x.calcMiddle(J);if(l){J.shadows=w.shadowAttrs[ae]}E[af]=J;if(!F){s=Ext.apply({type:"path",group:D,middle:J.middle},Ext.apply(n,f&&{fill:f[(T>1?ae:af)%C]}||{}));F=S.add(Ext.apply(s,u))}w.sprite=w.sprite||[];J.sprite=F;w.sprite.push(F);w.point=[J.middle.x,J.middle.y];if(ad){u=x.renderer(F,b.getAt(af),u,af,b);F._to=u;F._animating=true;x.onAnimate(F,{to:u,listeners:{afteranimate:{fn:function(){this._animating=false},scope:F}}})}else{u=x.renderer(F,b.getAt(af),Ext.apply(u,{hidden:false}),af,b);F.setAttributes(u,true)}H+=v}}M=D.getCount();for(af=0;af<M;af++){if(!t[(af/T)>>0]&&D.getAt(af)){D.getAt(af).hide(true)}}if(l){am=aa.length;for(K=0;K<M;K++){if(!t[(K/T)>>0]){for(ae=0;ae<am;ae++){if(aa[ae].getAt(K)){aa[ae].getAt(K).hide(true)}}}}}x.renderLabels();x.renderCallouts()},onCreateLabel:function(f,k,e,g){var h=this,j=h.labelsGroup,a=h.label,d=h.centerX,c=h.centerY,l=k.middle,b=Ext.apply(h.seriesLabelStyle||{},a||{});return h.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:j,x:l.x,y:l.y},b))},onPlaceLabel:function(j,o,w,s,r,e,f){var A=this,p=A.chart,v=p.resizing,z=A.label,t=z.renderer,c=[].concat(z.field),l=A.centerX,k=A.centerY,B=w.middle,b={x:B.x,y:B.y},n=B.x-l,m=B.y-k,q={},d=1,h=Math.atan2(m,n||1),u=h*180/Math.PI,g;b.hidden=false;if(this.__excludes&&this.__excludes[s]){b.hidden=true}function a(i){if(i<0){i+=360}return i%360}j.setAttributes({text:t(o.get(c[f]))},true);switch(r){case"outside":d=Math.sqrt(n*n+m*m)*2;b.x=d*Math.cos(h)+l;b.y=d*Math.sin(h)+k;break;case"rotate":u=a(u);u=(u>90&&u<270)?u+180:u;g=j.attr.rotation.degrees;if(g!=null&&Math.abs(g-u)>180){if(u>g){u-=360}else{u+=360}u=u%360}else{u=a(u)}b.rotate={degrees:u,x:b.x,y:b.y};break;default:break}b.translate={x:0,y:0};if(e&&!v&&(r!="rotate"||g!=null)){A.onAnimate(j,{to:b})}else{j.setAttributes(b,true)}j._from=q},onPlaceCallout:function(k,n,z,u,t,d,e){var B=this,o=B.chart,v=o.resizing,A=B.callouts,h=B.centerX,g=B.centerY,C=z.middle,b={x:C.x,y:C.y},m=C.x-h,j=C.y-g,c=1,l,f=Math.atan2(j,m||1),a=k.label.getBBox(),w=20,s=10,r=10,q;c=z.endRho+w;l=(z.endRho+z.startRho)/2+(z.endRho-z.startRho)/3;b.x=c*Math.cos(f)+h;b.y=c*Math.sin(f)+g;m=l*Math.cos(f);j=l*Math.sin(f);if(o.animate){B.onAnimate(k.lines,{to:{path:["M",m+h,j+g,"L",b.x,b.y,"Z","M",b.x,b.y,"l",m>0?s:-s,0,"z"]}});B.onAnimate(k.box,{to:{x:b.x+(m>0?s:-(s+a.width+2*r)),y:b.y+(j>0?(-a.height-r/2):(-a.height-r/2)),width:a.width+2*r,height:a.height+2*r}});B.onAnimate(k.label,{to:{x:b.x+(m>0?(s+r):-(s+a.width+r)),y:b.y+(j>0?-a.height/4:-a.height/4)}})}else{k.lines.setAttributes({path:["M",m+h,j+g,"L",b.x,b.y,"Z","M",b.x,b.y,"l",m>0?s:-s,0,"z"]},true);k.box.setAttributes({x:b.x+(m>0?s:-(s+a.width+2*r)),y:b.y+(j>0?(-a.height-r/2):(-a.height-r/2)),width:a.width+2*r,height:a.height+2*r},true);k.label.setAttributes({x:b.x+(m>0?(s+r):-(s+a.width+r)),y:b.y+(j>0?-a.height/4:-a.height/4)},true)}for(q in k){k[q].show(true)}},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(k,h,m,e){var g=this,d=g.centerX,c=g.centerY,o=Math.abs,n=o(k-d),l=o(h-c),f=m.startAngle,a=m.endAngle,j=Math.sqrt(n*n+l*l),b=Math.atan2(h-c,k-d)/g.rad;if(b>g.firstAngle){b-=360}return(b<=f&&b>a&&j>=m.startRho&&j<=m.endRho)},hideAll:function(){var e,b,g,f,d,a,c;if(!isNaN(this._index)){this.__excludes=this.__excludes||[];this.__excludes[this._index]=true;c=this.slices[this._index].sprite;for(d=0,a=c.length;d<a;d++){c[d].setAttributes({hidden:true},true)}if(this.slices[this._index].shadowAttrs){for(e=0,f=this.slices[this._index].shadowAttrs,b=f.length;e<b;e++){g=f[e];for(d=0,a=g.length;d<a;d++){g[d].setAttributes({hidden:true},true)}}}this.drawSeries()}},showAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=false;this.drawSeries()}},highlightItem:function(q){var t=this,s=t.rad;q=q||this.items[this._index];this.unHighlightItem();if(!q||q.sprite&&q.sprite._animating){return}t.callParent([q]);if(!t.highlight){return}if("segment" in t.highlightCfg){var v=t.highlightCfg.segment,d=t.chart.animate,n,p,a,e,j,b,l,c;if(t.labelsGroup){var f=t.labelsGroup,o=t.label.display,g=f.getAt(q.index),u=(q.startAngle+q.endAngle)/2*s,m=v.margin||0,k=m*Math.cos(u),h=m*Math.sin(u);if(Math.abs(k)<1e-10){k=0}if(Math.abs(h)<1e-10){h=0}if(d){g.stopAnimation();g.animate({to:{translate:{x:k,y:h}},duration:t.highlightDuration})}else{g.setAttributes({translate:{x:k,y:h}},true)}}if(t.chart.shadow&&q.shadows){p=0;a=q.shadows;j=a.length;for(;p<j;p++){e=a[p];b={};l=q.sprite._from.segment;for(c in l){if(!(c in v)){b[c]=l[c]}}n={segment:Ext.applyIf(b,t.highlightCfg.segment)};if(d){e.stopAnimation();e.animate({to:n,duration:t.highlightDuration})}else{e.setAttributes(n,true)}}}}},unHighlightItem:function(){var v=this;if(!v.highlight){return}if(("segment" in v.highlightCfg)&&v.items){var k=v.items,e=v.chart.animate,d=!!v.chart.shadow,h=v.labelsGroup,s=k.length,r=0,q=0,o=v.label.display,w,l,c,a,u,m,b,f,t,g,n;for(;r<s;r++){t=k[r];if(!t){continue}m=t.sprite;if(m&&m._highlighted){if(h){g=h.getAt(t.index);n=Ext.apply({translate:{x:0,y:0}},o=="rotate"?{rotate:{x:g.attr.x,y:g.attr.y,degrees:g.attr.rotation.degrees}}:{});if(e){g.stopAnimation();g.animate({to:n,duration:v.highlightDuration})}else{g.setAttributes(n,true)}}if(d){b=t.shadows;w=b.length;for(;q<w;q++){c={};a=t.sprite._to.segment;u=t.sprite._from.segment;Ext.apply(c,u);for(l in a){if(!(l in u)){c[l]=a[l]}}f=b[q];if(e){f.stopAnimation();f.animate({to:{segment:c},duration:v.highlightDuration})}else{f.setAttributes({segment:c},true)}}}}}}v.callParent(arguments)},getLegendColor:function(a){var b=this;return(b.colorSet&&b.colorSet[a%b.colorSet.length])||b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Radar",{extend:"Ext.chart.series.Series",requires:["Ext.chart.Shape","Ext.fx.Anim"],type:"radar",alias:"series.radar",rad:Math.PI/180,showInLegend:false,style:{},constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,d,b;e.group=a.getGroup(e.seriesId);if(e.showMarkers){e.markerGroup=a.getGroup(e.seriesId+"-markers")}},drawSeries:function(){var L=this,m=L.chart.getChartStore(),o=L.group,C,w=L.chart,k=w.animate,d=L.field||L.yField,E=w.surface,t=w.chartBBox,v=L.seriesIdx,b=L.colorArrayStyle,q,p,z,h,J=0,D=[],H=Math.max,f=Math.cos,a=Math.sin,B=Math.PI*2,F=m.getCount(),K,A,s,r,e,G,c,j=L.seriesStyle,I=L.seriesLabelStyle,n=w.resizing||!L.radar,g=w.axes&&w.axes.get(0),u=!(g&&g.maximum);L.setBBox();J=u?0:(g.maximum||0);Ext.apply(j,L.style||{});if(!m||!m.getCount()||L.seriesIsHidden){L.hide();L.items=[];if(L.radar){L.radar.hide(true)}L.radar=null;return}if(!j.stroke){j.stroke=b[v%b.length]}L.unHighlightItem();L.cleanHighlights();q=L.centerX=t.x+(t.width/2);p=L.centerY=t.y+(t.height/2);L.radius=h=Math.min(t.width,t.height)/2;L.items=z=[];if(u){w.series.each(function(i){D.push(i.yField)});m.each(function(l,x){for(x=0,c=D.length;x<c;x++){J=H(+l.get(D[x]),J)}})}J=J||1;K=[];A=[];m.each(function(l,x){e=h*l.get(d)/J;s=e*f(x/F*B);r=e*a(x/F*B);if(x==0){A.push("M",s+q,r+p);K.push("M",0.01*s+q,0.01*r+p)}else{A.push("L",s+q,r+p);K.push("L",0.01*s+q,0.01*r+p)}z.push({sprite:false,point:[q+s,p+r],storeItem:l,series:L})});A.push("Z");if(!L.radar){L.radar=E.add(Ext.apply({type:"path",group:o,path:K},j||{}))}if(w.resizing){L.radar.setAttributes({path:K},true)}if(w.animate){L.onAnimate(L.radar,{to:Ext.apply({path:A},j||{})})}else{L.radar.setAttributes(Ext.apply({path:A},j||{}),true)}if(L.showMarkers){L.drawMarkers()}L.renderLabels();L.renderCallouts()},drawMarkers:function(){var m=this,j=m.chart,a=j.surface,b=Ext.apply({},m.markerStyle||{}),h=Ext.apply(b,m.markerConfig,{fill:m.colorArrayStyle[m.seriesIdx%m.colorArrayStyle.length]}),k=m.items,n=h.type,p=m.markerGroup,e=m.centerX,d=m.centerY,o,g,c,f;delete h.type;for(g=0,c=k.length;g<c;g++){o=k[g];f=p.getAt(g);if(!f){f=Ext.chart.Shape[n](a,Ext.apply({group:p,x:0,y:0,translate:{x:e,y:d}},h))}else{f.show()}o.sprite=f;if(j.resizing){f.setAttributes({x:0,y:0,translate:{x:e,y:d}},true)}f._to={translate:{x:o.point[0],y:o.point[1]}};if(j.animate){m.onAnimate(f,{to:f._to})}else{f.setAttributes(Ext.apply(f._to,h||{}),true)}}},isItemInPoint:function(c,f,e){var b,d=10,a=Math.abs;b=e.point;return(a(b[0]-c)<=d&&a(b[1]-f)<=d)},onCreateLabel:function(f,l,e,g){var h=this,k=h.labelsGroup,a=h.label,d=h.centerX,c=h.centerY,j=l.point,b=Ext.apply(h.seriesLabelStyle||{},a);return h.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:k,x:d,y:c},a||{}))},onPlaceLabel:function(p,g,r,f,j,b){var l=this,k=l.chart,h=k.resizing,c=l.label,q=c.renderer,o=c.field,e=l.centerX,d=l.centerY,a={x:r.point[0],y:r.point[1]},n=a.x-e,m=a.y-d;p.setAttributes({text:q(g.get(o)),hidden:true},true);if(h){p.setAttributes({x:e,y:d},true)}if(b){p.show(true);l.onAnimate(p,{to:a})}else{p.setAttributes(a,true);p.show(true)}},toggleAll:function(a){var e=this,b,d,f,c;if(!a){Ext.chart.series.Radar.superclass.hideAll.call(e)}else{Ext.chart.series.Radar.superclass.showAll.call(e)}if(e.radar){e.radar.setAttributes({hidden:!a},true);if(e.radar.shadows){for(b=0,c=e.radar.shadows,d=c.length;b<d;b++){f=c[b];f.setAttributes({hidden:!a},true)}}}},hideAll:function(){this.toggleAll(false);this.hideMarkers(0)},showAll:function(){this.toggleAll(true)},hideMarkers:function(a){var d=this,c=d.markerGroup&&d.markerGroup.getCount()||0,b=a||0;for(;b<c;b++){d.markerGroup.getAt(b).hide(true)}}});Ext.define("Ext.chart.series.Scatter",{extend:"Ext.chart.series.Cartesian",requires:["Ext.chart.axis.Axis","Ext.chart.Shape","Ext.fx.Anim"],type:"scatter",alias:"series.scatter",constructor:function(c){this.callParent(arguments);var e=this,f=e.chart.shadow,a=e.chart.surface,d,b;Ext.apply(e,c,{style:{},markerConfig:{},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)"},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)"},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)"}]});e.group=a.getGroup(e.seriesId);if(f){for(d=0,b=e.shadowAttributes.length;d<b;d++){e.shadowGroups.push(a.getGroup(e.seriesId+"-shadows"+d))}}},getBounds:function(){var l=this,k=l.chart,n=k.getChartStore(),h=[].concat(l.axis),p,o,c,j,f,e,b,a,g,d,m;l.setBBox();p=l.bbox;for(g=0,j=h.length;g<j;g++){d=k.axes.get(h[g]);if(d){m=d.calcEnds();if(d.position=="top"||d.position=="bottom"){f=m.from;b=m.to}else{e=m.from;a=m.to}}}if(l.xField&&!Ext.isNumber(f)){d=Ext.create("Ext.chart.axis.Axis",{chart:k,fields:[].concat(l.xField)}).calcEnds();f=d.from;b=d.to}if(l.yField&&!Ext.isNumber(e)){d=Ext.create("Ext.chart.axis.Axis",{chart:k,fields:[].concat(l.yField)}).calcEnds();e=d.from;a=d.to}if(isNaN(f)){f=0;b=n.getCount()-1;o=p.width/(n.getCount()-1)}else{o=p.width/(b-f)}if(isNaN(e)){e=0;a=n.getCount()-1;c=p.height/(n.getCount()-1)}else{c=p.height/(a-e)}return{bbox:p,minX:f,minY:e,xScale:o,yScale:c}},getPaths:function(){var s=this,j=s.chart,b=j.shadow,d=j.getChartStore(),g=s.group,e=s.bounds=s.getBounds(),a=s.bbox,u=e.xScale,c=e.yScale,q=e.minX,p=e.minY,t=a.x,r=a.y,f=a.height,k=s.items=[],m=[],i,h,n,o,l;d.each(function(v,w){n=v.get(s.xField);o=v.get(s.yField);if(typeof o=="undefined"||(typeof o=="string"&&!o)||n==null||o==null){return}if(typeof n=="string"||typeof n=="object"&&!Ext.isDate(n)){n=w}if(typeof o=="string"||typeof o=="object"&&!Ext.isDate(o)){o=w}i=t+(n-q)*u;h=r+f-(o-p)*c;m.push({x:i,y:h});s.items.push({series:s,value:[n,o],point:[i,h],storeItem:v});if(j.animate&&j.resizing){l=g.getAt(w);if(l){s.resetPoint(l);if(b){s.resetShadow(l)}}}});return m},resetPoint:function(a){var b=this.bbox;a.setAttributes({translate:{x:(b.x+b.width)/2,y:(b.y+b.height)/2}},true)},resetShadow:function(c){var f=this,e=c.shadows,h=f.shadowAttributes,d=f.shadowGroups.length,g=f.bbox,b,a;for(b=0;b<d;b++){a=Ext.apply({},h[b]);if(a.translate){a.translate.x+=(g.x+g.width)/2;a.translate.y+=(g.y+g.height)/2}else{a.translate={x:(g.x+g.width)/2,y:(g.y+g.height)/2}}e[b].setAttributes(a,true)}},createPoint:function(a,c){var d=this,b=d.chart,e=d.group,f=d.bbox;return Ext.chart.Shape[c](b.surface,Ext.apply({},{x:0,y:0,group:e,translate:{x:(f.x+f.width)/2,y:(f.y+f.height)/2}},a))},createShadow:function(m,f,j){var h=this,g=h.chart,k=h.shadowGroups,d=h.shadowAttributes,a=k.length,n=h.bbox,c,l,b,e;m.shadows=b=[];for(c=0;c<a;c++){e=Ext.apply({},d[c]);if(e.translate){e.translate.x+=(n.x+n.width)/2;e.translate.y+=(n.y+n.height)/2}else{Ext.apply(e,{translate:{x:(n.x+n.width)/2,y:(n.y+n.height)/2}})}Ext.apply(e,f);l=Ext.chart.Shape[j](g.surface,Ext.apply({},{x:0,y:0,group:k[c]},e));b.push(l)}},drawSeries:function(){var t=this,k=t.chart,g=k.getChartStore(),h=t.group,c=k.shadow,a=t.shadowGroups,p=t.shadowAttributes,q=a.length,l,m,n,j,o,s,e,f,b,d,r;s=Ext.apply(t.markerStyle,t.markerConfig);f=s.type;delete s.type;if(!g||!g.getCount()){t.hide();t.items=[];return}t.unHighlightItem();t.cleanHighlights();m=t.getPaths();j=m.length;for(o=0;o<j;o++){n=m[o];l=h.getAt(o);Ext.apply(n,s);if(!l){l=t.createPoint(n,f);if(c){t.createShadow(l,s,f)}}b=l.shadows;if(k.animate){d=t.renderer(l,g.getAt(o),{translate:n},o,g);l._to=d;t.onAnimate(l,{to:d});for(e=0;e<q;e++){r=Ext.apply({},p[e]);d=t.renderer(b[e],g.getAt(o),Ext.apply({},{hidden:false,translate:{x:n.x+(r.translate?r.translate.x:0),y:n.y+(r.translate?r.translate.y:0)}},r),o,g);t.onAnimate(b[e],{to:d})}}else{d=t.renderer(l,g.getAt(o),{translate:n},o,g);l._to=d;l.setAttributes(d,true);for(e=0;e<q;e++){r=Ext.apply({},p[e]);d=t.renderer(b[e],g.getAt(o),Ext.apply({},{hidden:false,translate:{x:n.x+(r.translate?r.translate.x:0),y:n.y+(r.translate?r.translate.y:0)}},r),o,g);b[e].setAttributes(d,true)}}t.items[o].sprite=l}j=h.getCount();for(o=m.length;o<j;o++){h.getAt(o).hide(true)}t.renderLabels();t.renderCallouts()},onCreateLabel:function(d,j,c,e){var f=this,g=f.labelsGroup,a=f.label,b=Ext.apply({},a,f.seriesLabelStyle),h=f.bbox;return f.chart.surface.add(Ext.apply({type:"text",group:g,x:j.point[0],y:h.y+h.height/2},b))},onPlaceLabel:function(f,j,s,p,o,d){var u=this,k=u.chart,r=k.resizing,t=u.label,q=t.renderer,b=t.field,a=u.bbox,h=s.point[0],g=s.point[1],c=s.sprite.attr.radius,e,m,l,n;f.setAttributes({text:q(j.get(b)),hidden:true},true);if(o=="rotate"){f.setAttributes({"text-anchor":"start",rotation:{x:h,y:g,degrees:-45}},true);e=f.getBBox();m=e.width;l=e.height;h=h<a.x?a.x:h;h=(h+m>a.x+a.width)?(h-(h+m-a.x-a.width)):h;g=(g-l<a.y)?a.y+l:g}else{if(o=="under"||o=="over"){e=s.sprite.getBBox();e.width=e.width||(c*2);e.height=e.height||(c*2);g=g+(o=="over"?-e.height:e.height);e=f.getBBox();m=e.width/2;l=e.height/2;h=h-m<a.x?a.x+m:h;h=(h+m>a.x+a.width)?(h-(h+m-a.x-a.width)):h;g=g-l<a.y?a.y+l:g;g=(g+l>a.y+a.height)?(g-(g+l-a.y-a.height)):g}}if(!k.animate){f.setAttributes({x:h,y:g},true);f.show(true)}else{if(r){n=s.sprite.getActiveAnimation();if(n){n.on("afteranimate",function(){f.setAttributes({x:h,y:g},true);f.show(true)})}else{f.show(true)}}else{u.onAnimate(f,{to:{x:h,y:g}})}}},onPlaceCallout:function(j,l,A,w,v,c,g){var D=this,m=D.chart,t=m.surface,z=m.resizing,C=D.callouts,n=D.items,b=A.point,E,a=j.label.getBBox(),B=30,s=10,r=3,e,d,f,q,o,u=D.bbox,k,h;E=[Math.cos(Math.PI/4),-Math.sin(Math.PI/4)];k=b[0]+E[0]*B;h=b[1]+E[1]*B;e=k+(E[0]>0?0:-(a.width+2*r));d=h-a.height/2-r;f=a.width+2*r;q=a.height+2*r;if(e<u[0]||(e+f)>(u[0]+u[2])){E[0]*=-1}if(d<u[1]||(d+q)>(u[1]+u[3])){E[1]*=-1}k=b[0]+E[0]*B;h=b[1]+E[1]*B;e=k+(E[0]>0?0:-(a.width+2*r));d=h-a.height/2-r;f=a.width+2*r;q=a.height+2*r;if(m.animate){D.onAnimate(j.lines,{to:{path:["M",b[0],b[1],"L",k,h,"Z"]}},true);D.onAnimate(j.box,{to:{x:e,y:d,width:f,height:q}},true);D.onAnimate(j.label,{to:{x:k+(E[0]>0?r:-(a.width+r)),y:h}},true)}else{j.lines.setAttributes({path:["M",b[0],b[1],"L",k,h,"Z"]},true);j.box.setAttributes({x:e,y:d,width:f,height:q},true);j.label.setAttributes({x:k+(E[0]>0?r:-(a.width+r)),y:h},true)}for(o in j){j[o].show(true)}},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(c,g,e){var b,d=10,a=Math.abs;function f(h){var j=a(h[0]-c),i=a(h[1]-g);return Math.sqrt(j*j+i*i)}b=e.point;return(b[0]-d<=c&&b[0]+d>=c&&b[1]-d<=g&&b[1]+d>=g)}});
Ext.define("MyDesktop.SystemStatus",{extend:"Ext.ux.desktop.Module",requires:["Ext.chart.*"],id:"systemstatus",refreshRate:500,init:function(){Ext.chart.theme.Memory=Ext.extend(Ext.chart.theme.Base,{constructor:function(a){Ext.chart.theme.Memory.superclass.constructor.call(this,Ext.apply({colors:["rgb(244, 16, 0)","rgb(248, 130, 1)","rgb(0, 7, 255)","rgb(84, 254, 0)"]},a))}})},createNewWindow:function(){var a=this,b=a.app.getDesktop();a.cpuLoadData=[];a.cpuLoadStore=Ext.create("store.json",{fields:["core1","core2","time"]});a.memoryArray=["Wired","Active","Inactive","Free"];a.memoryStore=Ext.create("store.json",{fields:["name","memory"],data:a.generateData(a.memoryArray)});a.pass=0;a.processArray=["explorer","monitor","charts","desktop","Ext3","Ext4"];a.processesMemoryStore=Ext.create("store.json",{fields:["name","memory"],data:a.generateData(a.processArray)});a.generateCpuLoad();return b.createWindow({id:"systemstatus",title:"System Status",width:800,height:600,animCollapse:false,constrainHeader:true,border:false,layout:{type:"hbox",align:"stretch"},bodyStyle:{"background-color":"#FFF"},listeners:{afterrender:{fn:a.updateCharts,delay:100},destroy:function(){clearTimeout(a.updateTimer);a.updateTimer=null},scope:a},items:[{flex:1,xtype:"container",layout:{type:"vbox",align:"stretch"},items:[a.createCpu1LoadChart(),a.createCpu2LoadChart()]},{flex:1,xtype:"container",layout:{type:"vbox",align:"stretch"},items:[a.createMemoryPieChart(),a.createProcessChart()]}]})},createWindow:function(){var a=this.app.getDesktop().getWindow(this.id);if(!a){a=this.createNewWindow()}return a},createCpu1LoadChart:function(){return{flex:1,xtype:"chart",theme:"Category1",animate:false,store:this.cpuLoadStore,legend:{position:"bottom"},axes:[{type:"Numeric",position:"left",minimum:0,maximum:100,fields:["core1"],title:"CPU Load",grid:true,labelTitle:{font:"13px Arial"},label:{font:"11px Arial"}}],series:[{title:"Core 1 (3.4GHz)",type:"line",lineWidth:4,showMarkers:false,fill:true,axis:"left",xField:"time",yField:"core1",style:{"stroke-width":1}}]}},createCpu2LoadChart:function(){return{flex:1,xtype:"chart",theme:"Category2",animate:false,store:this.cpuLoadStore,legend:{position:"bottom"},axes:[{type:"Numeric",position:"left",minimum:0,maximum:100,grid:true,fields:["core2"],title:"CPU Load",labelTitle:{font:"13px Arial"},label:{font:"11px Arial"}}],series:[{title:"Core 2 (3.4GHz)",type:"line",lineWidth:4,showMarkers:false,fill:true,axis:"left",xField:"time",yField:"core2",style:{"stroke-width":1}}]}},createMemoryPieChart:function(){var a=this;return{flex:1,xtype:"chart",animate:{duration:250},store:this.memoryStore,shadow:true,legend:{position:"right"},insetPadding:40,theme:"Memory:gradients",series:[{donut:30,type:"pie",field:"memory",showInLegend:true,tips:{trackMouse:true,width:140,height:28,renderer:function(d,c){var b=0;a.memoryStore.each(function(e){b+=e.get("memory")});this.setTitle(d.get("name")+": "+Math.round(d.get("memory")/b*100)+"%")}},highlight:{segment:{margin:20}},labelTitle:{font:"13px Arial"},label:{field:"name",display:"rotate",contrast:true,font:"12px Arial"}}]}},createProcessChart:function(){return{flex:1,xtype:"chart",theme:"Category1",store:this.processesMemoryStore,animate:{easing:"ease-in-out",duration:750},axes:[{type:"Numeric",position:"left",minimum:0,maximum:10,fields:["memory"],title:"Memory",labelTitle:{font:"13px Arial"},label:{font:"11px Arial"}},{type:"Category",position:"bottom",fields:["name"],title:"System Processes",labelTitle:{font:"bold 14px Arial"},label:{rotation:{degrees:45}}},{type:"Numeric",position:"top",fields:["memory"],title:"Memory Usage",labelTitle:{font:"bold 14px Arial"},label:{fill:"#FFFFFF",stroke:"#FFFFFF"},axisStyle:{fill:"#FFFFFF",stroke:"#FFFFFF"}}],series:[{title:"Processes",type:"column",xField:"name",yField:"memory",renderer:function(g,c,b,f,e){var a=Ext.draw.Color.fromString("#b1da5a"),h=c.get("memory"),d;if(h>5){d=a.getDarker((h-5)/15).toString()}else{d=a.getLighter(((5-h)/20)).toString()}if(h>=8){d="#CD0000"}return Ext.apply(b,{fill:d})}}]}},generateCpuLoad:function(){var c=this,e=c.cpuLoadData;function a(f){var g=f+((Math.floor(Math.random()*2)%2)?-1:1)*Math.floor(Math.random()*9);if(g<0||g>100){g=50}return g}if(e.length===0){e.push({core1:0,core2:0,time:0});for(var b=1;b<100;b++){e.push({core1:a(e[b-1].core1),core2:a(e[b-1].core2),time:b})}c.cpuLoadStore.loadData(e)}else{c.cpuLoadStore.data.removeAt(0);c.cpuLoadStore.data.each(function(g,f){g.data.time=f});var d=c.cpuLoadStore.last().data;c.cpuLoadStore.loadData([{core1:a(d.core1),core2:a(d.core2),time:d.time+1}],true)}},generateData:function(e){var d=[],b,c=e.length,a;for(b=0;b<e.length;b++){a=Math.floor(Math.random()*c*100)/100+2;c=c-(a-5);d.push({name:e[b],memory:a})}return d},updateCharts:function(){var a=this;clearTimeout(a.updateTimer);a.updateTimer=setTimeout(function(){var c=new Date().getTime();if(a.pass%3===0){a.memoryStore.loadData(a.generateData(a.memoryArray))}if(a.pass%5===0){a.processesMemoryStore.loadData(a.generateData(a.processArray))}a.generateCpuLoad();var b=new Date().getTime();a.refreshRate=Math.max(a.refreshRate,(b-c)*4);a.updateCharts();a.pass++},a.refreshRate)}});Ext.define("Ext.tip.QuickTip",{extend:"Ext.tip.ToolTip",alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){var a=this;a.target=a.target||Ext.getDoc();a.targets=a.targets||{};a.callParent()},register:function(c){var g=Ext.isArray(c)?c:arguments,d=0,a=g.length,f,b,e;for(;d<a;d++){c=g[d];f=c.target;if(f){if(Ext.isArray(f)){for(b=0,e=f.length;b<e;b++){this.targets[Ext.id(f[b])]=c}}else{this.targets[Ext.id(f)]=c}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(a){var b=this,c=b.activeTarget;a=Ext.get(a).dom;if(b.isVisible()){if(c&&c.el==a){b.hide()}}else{if(c&&c.el==a){b.clearTimer("show")}}},getTipCfg:function(d){var c=d.getTarget(),b=c.title,a;if(this.interceptTitles&&b&&Ext.isString(b)){c.qtip=b;c.removeAttribute("title");d.preventDefault();return{text:b}}else{a=this.tagConfig;c=d.getTarget("["+a.namespace+a.attribute+"]");if(c){return{target:c,text:c.getAttribute(a.namespace+a.attribute)}}}},onTargetOver:function(g){var i=this,h=g.getTarget(i.delegate),a,d,b,f,j,c,k;if(i.disabled){return}i.targetXY=g.getXY();if(!h||h.nodeType!==1||h==document.documentElement||h==document.body){return}if(i.activeTarget&&((h==i.activeTarget.el)||Ext.fly(i.activeTarget.el).contains(h))){i.clearTimer("hide");i.show();return}if(h){Ext.Object.each(i.targets,function(e,l){var m=Ext.fly(l.target);if(m&&(m.dom===h||m.contains(h))){b=m.dom;return false}});if(b){i.activeTarget=i.targets[b.id];i.activeTarget.el=h;i.anchor=i.activeTarget.anchor;if(i.anchor){i.anchorTarget=h}a=Ext.isDefined(i.activeTarget.showDelay);if(a){d=i.showDelay;i.showDelay=i.activeTarget.showDelay}i.delayShow();if(a){i.showDelay=d}return}}b=Ext.get(h);f=i.tagConfig;j=f.namespace;c=i.getTipCfg(g);if(c){if(c.target){h=c.target;b=Ext.get(h)}k=b.getAttribute(j+f.hide);i.activeTarget={el:h,text:c.text,width:+b.getAttribute(j+f.width)||null,autoHide:k!="user"&&k!=="false",title:b.getAttribute(j+f.title),cls:b.getAttribute(j+f.cls),align:b.getAttribute(j+f.align)};i.anchor=b.getAttribute(j+f.anchor);if(i.anchor){i.anchorTarget=h}a=Ext.isDefined(i.activeTarget.showDelay);if(a){d=i.showDelay;i.showDelay=i.activeTarget.showDelay}i.delayShow();if(a){i.showDelay=d}}},onTargetOut:function(f){var c=this,d=c.activeTarget,a,b;if(d&&f.within(c.activeTarget.el)&&!c.getTipCfg(f)){return}c.clearTimer("show");if(c.autoHide!==false){a=d&&Ext.isDefined(d.hideDelay);if(a){b=c.hideDelay;c.hideDelay=d.hideDelay}c.delayHide();if(a){c.hideDelay=b}}},showAt:function(c){var a=this,b=a.activeTarget;if(b){if(!a.rendered){a.render(Ext.getBody());a.activeTarget=b}if(b.title){a.setTitle(b.title||"");a.header.show()}else{a.header.hide()}a.body.update(b.text);a.autoHide=b.autoHide;a.dismissDelay=b.dismissDelay||a.dismissDelay;if(a.lastCls){a.el.removeCls(a.lastCls);delete a.lastCls}if(b.cls){a.el.addCls(b.cls);a.lastCls=b.cls}a.setWidth(b.width);if(a.anchor){a.constrainPosition=false}else{if(b.align){c=a.el.getAlignToXY(b.el,b.align);a.constrainPosition=false}else{a.constrainPosition=true}}}a.callParent([c])},hide:function(){delete this.activeTarget;this.callParent()}});Ext.define("Ext.tip.QuickTipManager",function(){var b,a=false;return{requires:["Ext.tip.QuickTip"],singleton:true,alternateClassName:"Ext.QuickTips",init:function(f,d){if(!b){if(!Ext.isReady){Ext.onReady(function(){Ext.tip.QuickTipManager.init(f)});return}var c=Ext.apply({disabled:a,id:"ext-quicktips-tip"},d),e=c.className,g=c.xtype;if(e){delete c.className}else{if(g){e="widget."+g;delete c.xtype}}if(f!==false){c.renderTo=document.body}b=Ext.create(e||"Ext.tip.QuickTip",c)}},destroy:function(){if(b){var c;b.destroy();b=c}},ddDisable:function(){if(b&&!a){b.disable()}},ddEnable:function(){if(b&&!a){b.enable()}},enable:function(){if(b){b.enable()}a=false},disable:function(){if(b){b.disable()}a=true},isEnabled:function(){return b!==undefined&&!b.disabled},getQuickTip:function(){return b},register:function(){b.register.apply(b,arguments)},unregister:function(){b.unregister.apply(b,arguments)},tips:function(){b.register.apply(b,arguments)}}}());Ext.define("Ext.form.field.HtmlEditor",{extend:"Ext.Component",mixins:{labelable:"Ext.form.Labelable",field:"Ext.form.field.Field"},alias:"widget.htmleditor",alternateClassName:"Ext.form.HtmlEditor",requires:["Ext.tip.QuickTipManager","Ext.picker.Color","Ext.toolbar.Item","Ext.toolbar.Toolbar","Ext.util.Format","Ext.layout.component.field.HtmlEditor"],childEls:["iframeEl","textareaEl"],fieldSubTpl:["{%this.renderToolbar(out, values)%}","{beforeTextAreaTpl}",'<textarea id="{cmpId}-textareaEl" name="{name}" tabIndex="-1" {inputAttrTpl}',' class="{textareaCls}" style="{size}" autocomplete="off">',"{value}","</textarea>","{afterTextAreaTpl}","{beforeIFrameTpl}",'<iframe id="{cmpId}-iframeEl" name="{iframeName}" frameBorder="0" {iframeAttrTpl}',' style="overflow:auto;{size}" src="{iframeSrc}"></iframe>',"{afterIFrameTpl}",{disableFormats:true,renderToolbar:function(b,a){Ext.DomHelper.generateMarkup(a.$comp.toolbar.getRenderTree(),b)}}],subTplInsertions:["beforeTextAreaTpl","afterTextAreaTpl","beforeIFrameTpl","afterIFrameTpl","iframeAttrTpl","inputAttrTpl"],enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:(Ext.isOpera||Ext.isIE6)?"&#160;":"&#8203;",fieldBodyCls:Ext.baseCSSPrefix+"html-editor-wrap",componentLayout:"htmleditor",initialized:false,activated:false,sourceEditMode:false,iframePad:3,hideMode:"offsets",maskOnDisable:true,initComponent:function(){var a=this;a.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange");a.callParent(arguments);a.createToolbar(a);a.initLabelable();a.initField()},getRefItems:function(){return[this.toolbar]},createToolbar:function(f){var h=this,g=[],c,k=Ext.tip.QuickTipManager&&Ext.tip.QuickTipManager.isEnabled(),e=Ext.baseCSSPrefix,d,j,b;function a(m,i,l){return{itemId:m,cls:e+"btn-icon",iconCls:e+"edit-"+m,enableToggle:i!==false,scope:f,handler:l||f.relayBtnCmd,clickEvent:"mousedown",tooltip:k?f.buttonTips[m]||b:b,overflowText:f.buttonTips[m].title||b,tabIndex:-1}}if(h.enableFont&&!Ext.isSafari2){d=Ext.widget("component",{renderTpl:['<select id="{id}-selectEl" class="{cls}">','<tpl for="fonts">','<option value="{[values.toLowerCase()]}" style="font-family:{.}"<tpl if="values.toLowerCase()==parent.defaultFont"> selected</tpl>>{.}</option>',"</tpl>","</select>"],renderData:{cls:e+"font-select",fonts:h.fontFamilies,defaultFont:h.defaultFont},childEls:["selectEl"],afterRender:function(){h.fontSelect=this.selectEl;Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var i=this.selectEl;if(i){i.dom.disabled=true}Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var i=this.selectEl;if(i){i.dom.disabled=false}Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){h.relayCmd("fontname",h.fontSelect.dom.value);h.deferFocus()},element:"selectEl"}});g.push(d,"-")}if(h.enableFormat){g.push(a("bold"),a("italic"),a("underline"))}if(h.enableFontSize){g.push("-",a("increasefontsize",false,h.adjustFont),a("decreasefontsize",false,h.adjustFont))}if(h.enableColors){g.push("-",{itemId:"forecolor",cls:e+"btn-icon",iconCls:e+"edit-forecolor",overflowText:f.buttonTips.forecolor.title,tooltip:k?f.buttonTips.forecolor||b:b,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,clickEvent:"mousedown",handler:function(l,i){h.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+i:i);h.deferFocus();this.up("menu").hide()}}]})},{itemId:"backcolor",cls:e+"btn-icon",iconCls:e+"edit-backcolor",overflowText:f.buttonTips.backcolor.title,tooltip:k?f.buttonTips.backcolor||b:b,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,clickEvent:"mousedown",handler:function(l,i){if(Ext.isGecko){h.execCmd("useCSS",false);h.execCmd("hilitecolor",i);h.execCmd("useCSS",true);h.deferFocus()}else{h.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+i:i);h.deferFocus()}this.up("menu").hide()}}]})})}if(h.enableAlignments){g.push("-",a("justifyleft"),a("justifycenter"),a("justifyright"))}if(!Ext.isSafari2){if(h.enableLinks){g.push("-",a("createlink",false,h.createLink))}if(h.enableLists){g.push("-",a("insertorderedlist"),a("insertunorderedlist"))}if(h.enableSourceEdit){g.push("-",a("sourceedit",true,function(i){h.toggleSourceEdit(!h.sourceEditMode)}))}}for(c=0;c<g.length;c++){if(g[c].itemId!=="sourceedit"){g[c].disabled=true}}j=Ext.widget("toolbar",{id:h.id+"-toolbar",ownerCt:h,cls:Ext.baseCSSPrefix+"html-editor-tb",enableOverflow:true,items:g,ownerLayout:h.getComponentLayout(),listeners:{click:function(i){i.preventDefault()},element:"el"}});h.toolbar=j},onDisable:function(){this.bodyEl.mask();this.callParent(arguments)},onEnable:function(){this.bodyEl.unmask();this.callParent(arguments)},setReadOnly:function(e){var d=this,c=d.textareaEl,b=d.iframeEl,a;d.readOnly=e;if(c){c.dom.readOnly=e}if(d.initialized){a=d.getEditorBody();if(Ext.isIE){b.setDisplayed(false);a.contentEditable=!e;b.setDisplayed(true)}else{d.setDesignMode(!e)}if(a){a.style.cursor=e?"default":"text"}d.disableItems(e)}},getDocMarkup:function(){var b=this,a=b.iframeEl.getHeight()-b.iframePad*2;return Ext.String.format('<html><head><style type="text/css">body{border:0;margin:0;padding:{0}px;height:{1}px;box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;cursor:text}</style></head><body></body></html>',b.iframePad,a)},getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return(!Ext.isIE&&this.iframeEl.dom.contentDocument)||this.getWin().document},getWin:function(){return Ext.isIE?this.iframeEl.dom.contentWindow:window.frames[this.iframeEl.dom.name]},finishRenderChildren:function(){this.callParent();this.toolbar.finishRender()},onRender:function(){var a=this;a.callParent(arguments);a.inputEl=a.iframeEl;a.monitorTask=Ext.TaskManager.start({run:a.checkDesignMode,scope:a,interval:100})},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return a.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},getSubTplData:function(){return{$comp:this,cmpId:this.id,id:this.getInputId(),textareaCls:Ext.baseCSSPrefix+"hidden",value:this.value,iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,size:"height:100px;width:100%"}},getSubTplMarkup:function(){return this.getTpl("fieldSubTpl").apply(this.getSubTplData())},initFrameDoc:function(){var b=this,c,a;Ext.TaskManager.stop(b.monitorTask);c=b.getDoc();b.win=b.getWin();c.open();c.write(b.getDocMarkup());c.close();a={run:function(){var d=b.getDoc();if(d.body||d.readyState==="complete"){Ext.TaskManager.stop(a);b.setDesignMode(true);Ext.defer(b.initEditor,10,b)}},interval:10,duration:10000,scope:b};Ext.TaskManager.start(a)},checkDesignMode:function(){var a=this,b=a.getDoc();if(b&&(!b.editorInitialized||a.getDesignMode()!=="on")){a.initFrameDoc()}},setDesignMode:function(c){var a=this,b=a.getDoc();if(b){if(a.readOnly){c=false}b.designMode=(/on|true/i).test(String(c).toLowerCase())?"on":"off"}},getDesignMode:function(){var a=this.getDoc();return !a?"":String(a.designMode).toLowerCase()},disableItems:function(a){this.getToolbar().items.each(function(b){if(b.getItemId()!=="sourceedit"){b.setDisabled(a)}})},toggleSourceEdit:function(b){var f=this,d=f.iframeEl,a=f.textareaEl,e=Ext.baseCSSPrefix+"hidden",c=f.getToolbar().getComponent("sourceedit");if(!Ext.isBoolean(b)){b=!f.sourceEditMode}f.sourceEditMode=b;if(c.pressed!==b){c.toggle(b)}if(b){f.disableItems(true);f.syncValue();d.addCls(e);a.removeCls(e);a.dom.removeAttribute("tabIndex");a.focus();f.inputEl=a}else{if(f.initialized){f.disableItems(f.readOnly)}f.pushValue();d.removeCls(e);a.addCls(e);a.dom.setAttribute("tabIndex",-1);f.deferFocus();f.inputEl=d}f.fireEvent("editmodechange",f,b);f.doComponentLayout()},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=="http://"){this.relayCmd("createlink",a)}},clearInvalid:Ext.emptyFn,setValue:function(c){var b=this,a=b.textareaEl;b.mixins.field.setValue.call(b,c);if(c===null||c===undefined){c=""}if(a){a.dom.value=c}b.pushValue();return this},cleanHtml:function(a){a=String(a);if(Ext.isWebKit){a=a.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")}if(a.charCodeAt(0)===parseInt(this.defaultValue.replace(/\D/g,""),10)){a=a.substring(1)}return a},syncValue:function(){var f=this,b,g,e,a,d,c;if(f.initialized){b=f.getEditorBody();e=b.innerHTML;if(Ext.isWebKit){a=b.getAttribute("style");d=a.match(/text-align:(.*?);/i);if(d&&d[1]){e='<div style="'+d[0]+'">'+e+"</div>"}}e=f.cleanHtml(e);if(f.fireEvent("beforesync",f,e)!==false){if(f.textareaEl.dom.value!=e){f.textareaEl.dom.value=e;g=true}f.fireEvent("sync",f,e);if(g){f.checkChange()}}}},getValue:function(){var a=this,b;if(!a.sourceEditMode){a.syncValue()}b=a.rendered?a.textareaEl.dom.value:a.value;a.value=b;return b},pushValue:function(){var b=this,a;if(b.initialized){a=b.textareaEl.dom.value||"";if(!b.activated&&a.length<1){a=b.defaultValue}if(b.fireEvent("beforepush",b,a)!==false){b.getEditorBody().innerHTML=a;if(Ext.isGecko){b.setDesignMode(false);b.setDesignMode(true)}b.fireEvent("push",b,a)}}},deferFocus:function(){this.focus(false,true)},getFocusEl:function(){var a=this,b=a.win;return b&&!a.sourceEditMode?b:a.textareaEl},initEditor:function(){try{var f=this,d=f.getEditorBody(),b=f.textareaEl.getStyles("font-size","font-family","background-image","background-repeat","background-color","color"),h,c;b["background-attachment"]="fixed";d.bgProperties="fixed";Ext.DomHelper.applyStyles(d,b);h=f.getDoc();if(h){try{Ext.EventManager.removeAll(h)}catch(g){}}c=Ext.Function.bind(f.onEditorEvent,f);Ext.EventManager.on(h,{mousedown:c,dblclick:c,click:c,keyup:c,buffer:100});c=f.onRelayedEvent;Ext.EventManager.on(h,{mousedown:c,mousemove:c,mouseup:c,click:c,dblclick:c,scope:f});if(Ext.isGecko){Ext.EventManager.on(h,"keypress",f.applyCommand,f)}if(f.fixKeys){Ext.EventManager.on(h,"keydown",f.fixKeys,f)}Ext.EventManager.on(window,"unload",f.beforeDestroy,f);h.editorInitialized=true;f.initialized=true;f.pushValue();f.setReadOnly(f.readOnly);f.fireEvent("initialize",f)}catch(a){}},beforeDestroy:function(){var a=this,d=a.monitorTask,c,f;if(d){Ext.TaskManager.stop(d)}if(a.rendered){try{c=a.getDoc();if(c){Ext.EventManager.removeAll(c);for(f in c){if(c.hasOwnProperty(f)){delete c[f]}}}}catch(b){}Ext.destroyMembers(a,"toolbar","iframeEl","textareaEl")}a.callParent()},onRelayedEvent:function(c){var b=this.iframeEl,d=b.getXY(),a=c.getXY();c.xy=[d[0]+a[0],d[1]+a[1]];c.injectEvent(b);c.xy=a},onFirstFocus:function(){var c=this,b,a;c.activated=true;c.disableItems(c.readOnly);if(Ext.isGecko){c.win.focus();b=c.win.getSelection();if(!b.focusNode||b.focusNode.nodeType!==3){a=b.getRangeAt(0);a.selectNodeContents(c.getEditorBody());a.collapse(true);c.deferFocus()}try{c.execCmd("useCSS",true);c.execCmd("styleWithCSS",false)}catch(d){}}c.fireEvent("activate",c)},adjustFont:function(d){var e=d.getItemId()==="increasefontsize"?1:-1,c=this.getDoc().queryCommandValue("FontSize")||"2",a=Ext.isString(c)&&c.indexOf("px")!==-1,b;c=parseInt(c,10);if(a){if(c<=10){c=1+e}else{if(c<=13){c=2+e}else{if(c<=16){c=3+e}else{if(c<=18){c=4+e}else{if(c<=24){c=5+e}else{c=6+e}}}}}c=Ext.Number.constrain(c,1,6)}else{b=Ext.isSafari;if(b){e*=2}c=Math.max(1,c+e)+(b?"px":0)}this.execCmd("FontSize",c)},onEditorEvent:function(a){this.updateToolbar()},updateToolbar:function(){var e=this,d,f,a,c;if(e.readOnly){return}if(!e.activated){e.onFirstFocus();return}d=e.getToolbar().items.map;f=e.getDoc();if(e.enableFont&&!Ext.isSafari2){a=(f.queryCommandValue("FontName")||e.defaultFont).toLowerCase();c=e.fontSelect.dom;if(a!==c.value){c.value=a}}function b(){for(var j=0,g=arguments.length,h;j<g;j++){h=arguments[j];d[h].toggle(f.queryCommandState(h))}}if(e.enableFormat){b("bold","italic","underline")}if(e.enableAlignments){b("justifyleft","justifycenter","justifyright")}if(!Ext.isSafari2&&e.enableLists){b("insertorderedlist","insertunorderedlist")}Ext.menu.Manager.hideAll();e.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(b,a){Ext.defer(function(){var c=this;c.focus();c.execCmd(b,a);c.updateToolbar()},10,this)},execCmd:function(d,c){var b=this,e=b.getDoc(),a;e.execCommand(d,false,c===a?null:c);b.syncValue()},applyCommand:function(d){if(d.ctrlKey){var a=this,f=d.getCharCode(),b;if(f>0){f=String.fromCharCode(f);switch(f){case"b":b="bold";break;case"i":b="italic";break;case"u":b="underline";break}if(b){a.win.focus();a.execCmd(b);a.deferFocus();d.preventDefault()}}}},insertAtCursor:function(c){var b=this,a;if(b.activated){b.win.focus();if(Ext.isIE){a=b.getDoc().selection.createRange();if(a){a.pasteHTML(c);b.syncValue();b.deferFocus()}}else{b.execCmd("InsertHTML",c);b.deferFocus()}}},fixKeys:function(){if(Ext.isIE){return function(g){var c=this,b=g.getKey(),f=c.getDoc(),a,d;if(b===g.TAB){g.stopEvent();a=f.selection.createRange();if(a){a.collapse(true);a.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;");c.deferFocus()}}else{if(b===g.ENTER){a=f.selection.createRange();if(a){d=a.parentElement();if(!d||d.tagName.toLowerCase()!=="li"){g.stopEvent();a.pasteHTML("<br />");a.collapse(false);a.select()}}}}}}if(Ext.isOpera){return function(b){var a=this;if(b.getKey()===b.TAB){b.stopEvent();a.win.focus();a.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;");a.deferFocus()}}}if(Ext.isWebKit){return function(c){var b=this,a=c.getKey();if(a===c.TAB){c.stopEvent();b.execCmd("InsertText","\t");b.deferFocus()}else{if(a===c.ENTER){c.stopEvent();b.execCmd("InsertHtml","<br /><br />");b.deferFocus()}}}}return null}(),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:Ext.baseCSSPrefix+"html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:Ext.baseCSSPrefix+"html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:Ext.baseCSSPrefix+"html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:Ext.baseCSSPrefix+"html-editor-tip"}}});
Ext.define("MyDesktop.Notepad",{extend:"Ext.ux.desktop.Module",requires:["Ext.form.field.HtmlEditor"],id:"notepad",init:function(){this.launcher={text:"Notepad",iconCls:"notepad"}},createWindow:function(){var b=this.app.getDesktop();var a=b.getWindow("notepad");if(!a){a=b.createWindow({id:"notepad",title:"Notepad",width:600,height:400,iconCls:"notepad",animCollapse:false,border:false,hideMode:"offsets",layout:"fit",items:[{xtype:"htmleditor",id:"notepad-editor",value:['Some <b>rich</b> <font color="red">text</font> goes <u>here</u><br>',"Give it a try!"].join("")}]})}return a}});
